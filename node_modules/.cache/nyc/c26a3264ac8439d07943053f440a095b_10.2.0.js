"use strict";var cov_1e1zkd6vqh=function(){var path='/Users/je10617/Desktop/express-authenticate/users/_common/user.js',hash='186305edc3dd71b3394741957bcfdb708c9e29e8',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/je10617/Desktop/express-authenticate/users/_common/user.js',statementMap:{'0':{start:{line:3,column:15},end:{line:3,column:43}},'1':{start:{line:4,column:11},end:{line:4,column:44}},'2':{start:{line:5,column:22},end:{line:5,column:67}},'3':{start:{line:6,column:25},end:{line:6,column:62}},'4':{start:{line:8,column:0},end:{line:8,column:36}},'5':{start:{line:21,column:4},end:{line:21,column:42}},'6':{start:{line:22,column:4},end:{line:22,column:55}},'7':{start:{line:23,column:4},end:{line:23,column:39}},'8':{start:{line:24,column:4},end:{line:24,column:26}},'9':{start:{line:25,column:4},end:{line:25,column:34}},'10':{start:{line:26,column:4},end:{line:26,column:41}},'11':{start:{line:40,column:16},end:{line:40,column:20}},'12':{start:{line:41,column:4},end:{line:41,column:45}},'13':{start:{line:42,column:4},end:{line:42,column:36}},'14':{start:{line:52,column:16},end:{line:52,column:20}},'15':{start:{line:54,column:4},end:{line:54,column:54}},'16':{start:{line:54,column:31},end:{line:54,column:54}},'17':{start:{line:56,column:4},end:{line:75,column:7}},'18':{start:{line:58,column:8},end:{line:70,column:11}},'19':{start:{line:59,column:10},end:{line:66,column:13}},'20':{start:{line:62,column:12},end:{line:62,column:41}},'21':{start:{line:65,column:12},end:{line:65,column:24}},'22':{start:{line:69,column:10},end:{line:69,column:22}},'23':{start:{line:84,column:16},end:{line:84,column:20}},'24':{start:{line:85,column:4},end:{line:85,column:48}},'25':{start:{line:95,column:16},end:{line:95,column:20}},'26':{start:{line:96,column:4},end:{line:104,column:7}},'27':{start:{line:97,column:8},end:{line:102,column:11}},'28':{start:{line:98,column:10},end:{line:98,column:27}},'29':{start:{line:101,column:10},end:{line:101,column:22}},'30':{start:{line:113,column:14},end:{line:113,column:18}},'31':{start:{line:114,column:4},end:{line:128,column:7}},'32':{start:{line:116,column:6},end:{line:127,column:9}},'33':{start:{line:117,column:8},end:{line:126,column:9}},'34':{start:{line:120,column:10},end:{line:120,column:31}},'35':{start:{line:122,column:10},end:{line:122,column:46}},'36':{start:{line:123,column:10},end:{line:123,column:38}},'37':{start:{line:124,column:10},end:{line:124,column:38}},'38':{start:{line:137,column:16},end:{line:137,column:20}},'39':{start:{line:138,column:4},end:{line:164,column:7}},'40':{start:{line:139,column:24},end:{line:139,column:26}},'41':{start:{line:140,column:6},end:{line:140,column:130}},'42':{start:{line:141,column:6},end:{line:141,column:142}},'43':{start:{line:142,column:6},end:{line:142,column:137}},'44':{start:{line:143,column:6},end:{line:143,column:135}},'45':{start:{line:144,column:6},end:{line:144,column:136}},'46':{start:{line:145,column:6},end:{line:145,column:152}},'47':{start:{line:146,column:6},end:{line:146,column:137}},'48':{start:{line:149,column:6},end:{line:162,column:9}},'49':{start:{line:150,column:22},end:{line:150,column:34}},'50':{start:{line:151,column:8},end:{line:151,column:48}},'51':{start:{line:152,column:8},end:{line:152,column:36}},'52':{start:{line:153,column:8},end:{line:153,column:48}},'53':{start:{line:154,column:8},end:{line:154,column:35}},'54':{start:{line:155,column:8},end:{line:155,column:37}},'55':{start:{line:156,column:8},end:{line:156,column:44}},'56':{start:{line:157,column:8},end:{line:157,column:25}},'57':{start:{line:161,column:8},end:{line:161,column:22}},'58':{start:{line:172,column:16},end:{line:172,column:20}},'59':{start:{line:173,column:4},end:{line:191,column:7}},'60':{start:{line:175,column:6},end:{line:190,column:9}},'61':{start:{line:176,column:8},end:{line:185,column:9}},'62':{start:{line:177,column:10},end:{line:182,column:13}},'63':{start:{line:179,column:12},end:{line:179,column:63}},'64':{start:{line:181,column:12},end:{line:181,column:26}},'65':{start:{line:184,column:10},end:{line:184,column:65}},'66':{start:{line:189,column:8},end:{line:189,column:20}},'67':{start:{line:203,column:16},end:{line:203,column:20}},'68':{start:{line:204,column:4},end:{line:218,column:7}},'69':{start:{line:205,column:6},end:{line:217,column:9}},'70':{start:{line:207,column:8},end:{line:213,column:9}},'71':{start:{line:210,column:10},end:{line:212,column:13}},'72':{start:{line:211,column:12},end:{line:211,column:26}},'73':{start:{line:216,column:8},end:{line:216,column:22}},'74':{start:{line:227,column:16},end:{line:227,column:20}},'75':{start:{line:228,column:4},end:{line:235,column:7}},'76':{start:{line:229,column:6},end:{line:234,column:9}},'77':{start:{line:230,column:8},end:{line:230,column:22}},'78':{start:{line:233,column:8},end:{line:233,column:22}},'79':{start:{line:244,column:16},end:{line:244,column:20}},'80':{start:{line:245,column:4},end:{line:288,column:7}},'81':{start:{line:246,column:6},end:{line:287,column:9}},'82':{start:{line:248,column:25},end:{line:268,column:9}},'83':{start:{line:269,column:39},end:{line:269,column:41}},'84':{start:{line:270,column:8},end:{line:272,column:9}},'85':{start:{line:271,column:10},end:{line:271,column:146}},'86':{start:{line:273,column:8},end:{line:282,column:11}},'87':{start:{line:274,column:10},end:{line:276,column:11}},'88':{start:{line:275,column:12},end:{line:275,column:63}},'89':{start:{line:277,column:10},end:{line:277,column:37}},'90':{start:{line:278,column:10},end:{line:278,column:32}},'91':{start:{line:281,column:10},end:{line:281,column:22}},'92':{start:{line:286,column:8},end:{line:286,column:20}},'93':{start:{line:298,column:16},end:{line:298,column:20}},'94':{start:{line:299,column:4},end:{line:306,column:7}},'95':{start:{line:300,column:6},end:{line:305,column:9}},'96':{start:{line:301,column:8},end:{line:301,column:22}},'97':{start:{line:304,column:8},end:{line:304,column:20}},'98':{start:{line:318,column:16},end:{line:318,column:20}},'99':{start:{line:320,column:4},end:{line:330,column:7}},'100':{start:{line:321,column:6},end:{line:328,column:8}},'101':{start:{line:322,column:8},end:{line:322,column:42}},'102':{start:{line:323,column:8},end:{line:323,column:45}},'103':{start:{line:324,column:8},end:{line:324,column:22}},'104':{start:{line:327,column:8},end:{line:327,column:22}},'105':{start:{line:340,column:16},end:{line:340,column:20}},'106':{start:{line:342,column:4},end:{line:351,column:7}},'107':{start:{line:343,column:6},end:{line:350,column:9}},'108':{start:{line:345,column:8},end:{line:345,column:43}},'109':{start:{line:346,column:8},end:{line:346,column:22}},'110':{start:{line:349,column:8},end:{line:349,column:20}},'111':{start:{line:361,column:16},end:{line:361,column:20}},'112':{start:{line:363,column:4},end:{line:372,column:7}},'113':{start:{line:364,column:6},end:{line:371,column:9}},'114':{start:{line:366,column:8},end:{line:366,column:47}},'115':{start:{line:367,column:8},end:{line:367,column:22}},'116':{start:{line:370,column:8},end:{line:370,column:20}},'117':{start:{line:382,column:16},end:{line:382,column:20}},'118':{start:{line:383,column:4},end:{line:441,column:7}},'119':{start:{line:385,column:6},end:{line:385,column:75}},'120':{start:{line:386,column:6},end:{line:386,column:66}},'121':{start:{line:387,column:6},end:{line:387,column:105}},'122':{start:{line:388,column:6},end:{line:388,column:59}},'123':{start:{line:389,column:6},end:{line:389,column:50}},'124':{start:{line:391,column:6},end:{line:393,column:7}},'125':{start:{line:392,column:8},end:{line:392,column:35}},'126':{start:{line:395,column:6},end:{line:438,column:9}},'127':{start:{line:398,column:8},end:{line:398,column:60}},'128':{start:{line:399,column:8},end:{line:437,column:11}},'129':{start:{line:400,column:10},end:{line:436,column:13}},'130':{start:{line:403,column:12},end:{line:403,column:69}},'131':{start:{line:405,column:12},end:{line:431,column:15}},'132':{start:{line:408,column:14},end:{line:430,column:15}},'133':{start:{line:409,column:16},end:{line:409,column:43}},'134':{start:{line:412,column:16},end:{line:428,column:19}},'135':{start:{line:419,column:18},end:{line:426,column:21}},'136':{start:{line:422,column:20},end:{line:424,column:23}},'137':{start:{line:423,column:22},end:{line:423,column:49}},'138':{start:{line:432,column:12},end:{line:432,column:26}},'139':{start:{line:434,column:12},end:{line:434,column:33}},'140':{start:{line:435,column:12},end:{line:435,column:26}},'141':{start:{line:448,column:16},end:{line:448,column:20}},'142':{start:{line:450,column:4},end:{line:525,column:7}},'143':{start:{line:453,column:6},end:{line:453,column:57}},'144':{start:{line:454,column:6},end:{line:454,column:75}},'145':{start:{line:455,column:6},end:{line:455,column:66}},'146':{start:{line:456,column:6},end:{line:456,column:105}},'147':{start:{line:458,column:6},end:{line:458,column:59}},'148':{start:{line:459,column:6},end:{line:459,column:50}},'149':{start:{line:461,column:6},end:{line:463,column:7}},'150':{start:{line:462,column:8},end:{line:462,column:35}},'151':{start:{line:465,column:6},end:{line:522,column:9}},'152':{start:{line:466,column:8},end:{line:466,column:60}},'153':{start:{line:468,column:8},end:{line:517,column:11}},'154':{start:{line:470,column:10},end:{line:470,column:67}},'155':{start:{line:472,column:10},end:{line:513,column:11}},'156':{start:{line:473,column:12},end:{line:503,column:15}},'157':{start:{line:474,column:16},end:{line:498,column:19}},'158':{start:{line:478,column:18},end:{line:496,column:21}},'159':{start:{line:479,column:20},end:{line:494,column:21}},'160':{start:{line:480,column:22},end:{line:480,column:49}},'161':{start:{line:481,column:22},end:{line:493,column:25}},'162':{start:{line:487,column:24},end:{line:487,column:79}},'163':{start:{line:488,column:24},end:{line:488,column:65}},'164':{start:{line:492,column:24},end:{line:492,column:41}},'165':{start:{line:497,column:18},end:{line:497,column:32}},'166':{start:{line:502,column:14},end:{line:502,column:26}},'167':{start:{line:506,column:12},end:{line:512,column:15}},'168':{start:{line:508,column:14},end:{line:508,column:28}},'169':{start:{line:511,column:14},end:{line:511,column:26}},'170':{start:{line:516,column:10},end:{line:516,column:24}},'171':{start:{line:521,column:8},end:{line:521,column:20}},'172':{start:{line:532,column:0},end:{line:532,column:20}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:36},end:{line:28,column:3}},line:19},'1':{name:'(anonymous_1)',decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:12},end:{line:33,column:3}},line:31},'2':{name:'(anonymous_2)',decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:44,column:3}},line:39},'3':{name:'(anonymous_3)',decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:21},end:{line:76,column:3}},line:50},'4':{name:'(anonymous_4)',decl:{start:{line:56,column:23},end:{line:56,column:24}},loc:{start:{line:56,column:41},end:{line:75,column:5}},line:56},'5':{name:'(anonymous_5)',decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:45},end:{line:67,column:9}},line:58},'6':{name:'(anonymous_6)',decl:{start:{line:61,column:17},end:{line:61,column:18}},loc:{start:{line:61,column:25},end:{line:63,column:11}},line:61},'7':{name:'(anonymous_7)',decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:66,column:11}},line:64},'8':{name:'(anonymous_8)',decl:{start:{line:68,column:15},end:{line:68,column:16}},loc:{start:{line:68,column:22},end:{line:70,column:9}},line:68},'9':{name:'(anonymous_9)',decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:33},end:{line:86,column:3}},line:83},'10':{name:'(anonymous_10)',decl:{start:{line:93,column:2},end:{line:93,column:3}},loc:{start:{line:93,column:17},end:{line:105,column:3}},line:93},'11':{name:'(anonymous_11)',decl:{start:{line:96,column:23},end:{line:96,column:24}},loc:{start:{line:96,column:41},end:{line:104,column:5}},line:96},'12':{name:'(anonymous_12)',decl:{start:{line:97,column:119},end:{line:97,column:120}},loc:{start:{line:97,column:127},end:{line:99,column:9}},line:97},'13':{name:'(anonymous_13)',decl:{start:{line:100,column:15},end:{line:100,column:16}},loc:{start:{line:100,column:22},end:{line:102,column:9}},line:100},'14':{name:'(anonymous_14)',decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:24},end:{line:130,column:3}},line:112},'15':{name:'(anonymous_15)',decl:{start:{line:114,column:23},end:{line:114,column:24}},loc:{start:{line:114,column:49},end:{line:128,column:5}},line:114},'16':{name:'(anonymous_16)',decl:{start:{line:116,column:94},end:{line:116,column:95}},loc:{start:{line:116,column:102},end:{line:127,column:7}},line:116},'17':{name:'(anonymous_17)',decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:33},end:{line:165,column:3}},line:136},'18':{name:'(anonymous_18)',decl:{start:{line:138,column:23},end:{line:138,column:24}},loc:{start:{line:138,column:41},end:{line:164,column:5}},line:138},'19':{name:'(anonymous_19)',decl:{start:{line:149,column:38},end:{line:149,column:39}},loc:{start:{line:149,column:48},end:{line:160,column:7}},line:149},'20':{name:'(anonymous_20)',decl:{start:{line:160,column:15},end:{line:160,column:16}},loc:{start:{line:160,column:24},end:{line:162,column:7}},line:160},'21':{name:'(anonymous_21)',decl:{start:{line:171,column:2},end:{line:171,column:3}},loc:{start:{line:171,column:16},end:{line:194,column:3}},line:171},'22':{name:'(anonymous_22)',decl:{start:{line:173,column:23},end:{line:173,column:24}},loc:{start:{line:173,column:41},end:{line:191,column:5}},line:173},'23':{name:'(anonymous_23)',decl:{start:{line:175,column:33},end:{line:175,column:34}},loc:{start:{line:175,column:43},end:{line:187,column:7}},line:175},'24':{name:'(anonymous_24)',decl:{start:{line:177,column:107},end:{line:177,column:108}},loc:{start:{line:177,column:115},end:{line:182,column:11}},line:177},'25':{name:'(anonymous_25)',decl:{start:{line:188,column:13},end:{line:188,column:14}},loc:{start:{line:188,column:20},end:{line:190,column:7}},line:188},'26':{name:'(anonymous_26)',decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:31},end:{line:220,column:3}},line:202},'27':{name:'(anonymous_27)',decl:{start:{line:204,column:23},end:{line:204,column:24}},loc:{start:{line:204,column:49},end:{line:218,column:5}},line:204},'28':{name:'(anonymous_28)',decl:{start:{line:205,column:126},end:{line:205,column:127}},loc:{start:{line:205,column:134},end:{line:214,column:7}},line:205},'29':{name:'(anonymous_29)',decl:{start:{line:210,column:97},end:{line:210,column:98}},loc:{start:{line:210,column:101},end:{line:212,column:11}},line:210},'30':{name:'(anonymous_30)',decl:{start:{line:215,column:13},end:{line:215,column:14}},loc:{start:{line:215,column:22},end:{line:217,column:7}},line:215},'31':{name:'(anonymous_31)',decl:{start:{line:226,column:2},end:{line:226,column:3}},loc:{start:{line:226,column:16},end:{line:236,column:3}},line:226},'32':{name:'(anonymous_32)',decl:{start:{line:228,column:23},end:{line:228,column:24}},loc:{start:{line:228,column:49},end:{line:235,column:5}},line:228},'33':{name:'(anonymous_33)',decl:{start:{line:229,column:93},end:{line:229,column:94}},loc:{start:{line:229,column:101},end:{line:231,column:7}},line:229},'34':{name:'(anonymous_34)',decl:{start:{line:232,column:13},end:{line:232,column:14}},loc:{start:{line:232,column:22},end:{line:234,column:7}},line:232},'35':{name:'(anonymous_35)',decl:{start:{line:243,column:2},end:{line:243,column:3}},loc:{start:{line:243,column:29},end:{line:289,column:3}},line:243},'36':{name:'(anonymous_36)',decl:{start:{line:245,column:23},end:{line:245,column:24}},loc:{start:{line:245,column:41},end:{line:288,column:5}},line:245},'37':{name:'(anonymous_37)',decl:{start:{line:246,column:102},end:{line:246,column:103}},loc:{start:{line:246,column:110},end:{line:284,column:7}},line:246},'38':{name:'(anonymous_38)',decl:{start:{line:273,column:53},end:{line:273,column:54}},loc:{start:{line:273,column:63},end:{line:279,column:9}},line:273},'39':{name:'(anonymous_39)',decl:{start:{line:280,column:15},end:{line:280,column:16}},loc:{start:{line:280,column:22},end:{line:282,column:9}},line:280},'40':{name:'(anonymous_40)',decl:{start:{line:285,column:13},end:{line:285,column:14}},loc:{start:{line:285,column:20},end:{line:287,column:7}},line:285},'41':{name:'(anonymous_41)',decl:{start:{line:297,column:2},end:{line:297,column:3}},loc:{start:{line:297,column:22},end:{line:308,column:3}},line:297},'42':{name:'(anonymous_42)',decl:{start:{line:299,column:23},end:{line:299,column:24}},loc:{start:{line:299,column:41},end:{line:306,column:5}},line:299},'43':{name:'(anonymous_43)',decl:{start:{line:300,column:55},end:{line:300,column:56}},loc:{start:{line:300,column:63},end:{line:302,column:7}},line:300},'44':{name:'(anonymous_44)',decl:{start:{line:303,column:13},end:{line:303,column:14}},loc:{start:{line:303,column:20},end:{line:305,column:7}},line:303},'45':{name:'(anonymous_45)',decl:{start:{line:316,column:2},end:{line:316,column:3}},loc:{start:{line:316,column:21},end:{line:331,column:3}},line:316},'46':{name:'(anonymous_46)',decl:{start:{line:320,column:23},end:{line:320,column:24}},loc:{start:{line:320,column:41},end:{line:330,column:5}},line:320},'47':{name:'(anonymous_47)',decl:{start:{line:321,column:91},end:{line:321,column:92}},loc:{start:{line:321,column:99},end:{line:325,column:7}},line:321},'48':{name:'(anonymous_48)',decl:{start:{line:326,column:13},end:{line:326,column:14}},loc:{start:{line:326,column:22},end:{line:328,column:7}},line:326},'49':{name:'(anonymous_49)',decl:{start:{line:339,column:2},end:{line:339,column:3}},loc:{start:{line:339,column:28},end:{line:352,column:3}},line:339},'50':{name:'(anonymous_50)',decl:{start:{line:342,column:23},end:{line:342,column:24}},loc:{start:{line:342,column:41},end:{line:351,column:5}},line:342},'51':{name:'(anonymous_51)',decl:{start:{line:343,column:97},end:{line:343,column:98}},loc:{start:{line:343,column:101},end:{line:347,column:7}},line:343},'52':{name:'(anonymous_52)',decl:{start:{line:348,column:13},end:{line:348,column:14}},loc:{start:{line:348,column:20},end:{line:350,column:7}},line:348},'53':{name:'(anonymous_53)',decl:{start:{line:359,column:2},end:{line:359,column:3}},loc:{start:{line:359,column:25},end:{line:373,column:3}},line:359},'54':{name:'(anonymous_54)',decl:{start:{line:363,column:23},end:{line:363,column:24}},loc:{start:{line:363,column:41},end:{line:372,column:5}},line:363},'55':{name:'(anonymous_55)',decl:{start:{line:364,column:95},end:{line:364,column:96}},loc:{start:{line:364,column:99},end:{line:368,column:7}},line:364},'56':{name:'(anonymous_56)',decl:{start:{line:369,column:13},end:{line:369,column:14}},loc:{start:{line:369,column:20},end:{line:371,column:7}},line:369},'57':{name:'(anonymous_57)',decl:{start:{line:380,column:2},end:{line:380,column:3}},loc:{start:{line:380,column:21},end:{line:442,column:3}},line:380},'58':{name:'(anonymous_58)',decl:{start:{line:383,column:23},end:{line:383,column:24}},loc:{start:{line:383,column:41},end:{line:441,column:5}},line:383},'59':{name:'(anonymous_59)',decl:{start:{line:395,column:96},end:{line:395,column:97}},loc:{start:{line:395,column:104},end:{line:438,column:7}},line:395},'60':{name:'(anonymous_60)',decl:{start:{line:399,column:162},end:{line:399,column:163}},loc:{start:{line:399,column:166},end:{line:437,column:9}},line:399},'61':{name:'(anonymous_61)',decl:{start:{line:400,column:84},end:{line:400,column:85}},loc:{start:{line:400,column:88},end:{line:433,column:11}},line:400},'62':{name:'(anonymous_62)',decl:{start:{line:405,column:86},end:{line:405,column:87}},loc:{start:{line:405,column:94},end:{line:431,column:13}},line:405},'63':{name:'(anonymous_63)',decl:{start:{line:415,column:24},end:{line:415,column:25}},loc:{start:{line:415,column:28},end:{line:428,column:17}},line:415},'64':{name:'(anonymous_64)',decl:{start:{line:419,column:99},end:{line:419,column:100}},loc:{start:{line:419,column:103},end:{line:426,column:19}},line:419},'65':{name:'(anonymous_65)',decl:{start:{line:422,column:61},end:{line:422,column:62}},loc:{start:{line:422,column:65},end:{line:424,column:21}},line:422},'66':{name:'(anonymous_66)',decl:{start:{line:433,column:19},end:{line:433,column:20}},loc:{start:{line:433,column:28},end:{line:436,column:11}},line:433},'67':{name:'(anonymous_67)',decl:{start:{line:446,column:2},end:{line:446,column:3}},loc:{start:{line:446,column:21},end:{line:527,column:3}},line:446},'68':{name:'(anonymous_68)',decl:{start:{line:450,column:23},end:{line:450,column:24}},loc:{start:{line:450,column:41},end:{line:525,column:5}},line:450},'69':{name:'(anonymous_69)',decl:{start:{line:465,column:96},end:{line:465,column:97}},loc:{start:{line:465,column:104},end:{line:519,column:7}},line:465},'70':{name:'(anonymous_70)',decl:{start:{line:468,column:59},end:{line:468,column:60}},loc:{start:{line:468,column:70},end:{line:514,column:9}},line:468},'71':{name:'(anonymous_71)',decl:{start:{line:473,column:166},end:{line:473,column:167}},loc:{start:{line:473,column:170},end:{line:500,column:13}},line:473},'72':{name:'(anonymous_72)',decl:{start:{line:474,column:99},end:{line:474,column:100}},loc:{start:{line:474,column:103},end:{line:498,column:17}},line:474},'73':{name:'(anonymous_73)',decl:{start:{line:478,column:92},end:{line:478,column:93}},loc:{start:{line:478,column:100},end:{line:496,column:19}},line:478},'74':{name:'(anonymous_74)',decl:{start:{line:484,column:30},end:{line:484,column:31}},loc:{start:{line:484,column:34},end:{line:490,column:23}},line:484},'75':{name:'(anonymous_75)',decl:{start:{line:491,column:29},end:{line:491,column:30}},loc:{start:{line:491,column:36},end:{line:493,column:23}},line:491},'76':{name:'(anonymous_76)',decl:{start:{line:501,column:19},end:{line:501,column:20}},loc:{start:{line:501,column:26},end:{line:503,column:13}},line:501},'77':{name:'(anonymous_77)',decl:{start:{line:506,column:90},end:{line:506,column:91}},loc:{start:{line:506,column:94},end:{line:509,column:13}},line:506},'78':{name:'(anonymous_78)',decl:{start:{line:510,column:19},end:{line:510,column:20}},loc:{start:{line:510,column:26},end:{line:512,column:13}},line:510},'79':{name:'(anonymous_79)',decl:{start:{line:515,column:15},end:{line:515,column:16}},loc:{start:{line:515,column:24},end:{line:517,column:9}},line:515},'80':{name:'(anonymous_80)',decl:{start:{line:520,column:13},end:{line:520,column:14}},loc:{start:{line:520,column:20},end:{line:522,column:7}},line:520}},branchMap:{'0':{loc:{start:{line:19,column:14},end:{line:19,column:27}},type:'default-arg',locations:[{start:{line:19,column:25},end:{line:19,column:27}}],line:19},'1':{loc:{start:{line:54,column:4},end:{line:54,column:54}},type:'if',locations:[{start:{line:54,column:4},end:{line:54,column:54}},{start:{line:54,column:4},end:{line:54,column:54}}],line:54},'2':{loc:{start:{line:117,column:8},end:{line:126,column:9}},type:'if',locations:[{start:{line:117,column:8},end:{line:126,column:9}},{start:{line:117,column:8},end:{line:126,column:9}}],line:117},'3':{loc:{start:{line:176,column:8},end:{line:185,column:9}},type:'if',locations:[{start:{line:176,column:8},end:{line:185,column:9}},{start:{line:176,column:8},end:{line:185,column:9}}],line:176},'4':{loc:{start:{line:207,column:8},end:{line:213,column:9}},type:'if',locations:[{start:{line:207,column:8},end:{line:213,column:9}},{start:{line:207,column:8},end:{line:213,column:9}}],line:207},'5':{loc:{start:{line:207,column:11},end:{line:208,column:51}},type:'binary-expr',locations:[{start:{line:207,column:11},end:{line:207,column:32}},{start:{line:207,column:36},end:{line:207,column:57}},{start:{line:208,column:8},end:{line:208,column:51}}],line:207},'6':{loc:{start:{line:387,column:36},end:{line:387,column:104}},type:'cond-expr',locations:[{start:{line:387,column:58},end:{line:387,column:93}},{start:{line:387,column:94},end:{line:387,column:104}}],line:387},'7':{loc:{start:{line:391,column:6},end:{line:393,column:7}},type:'if',locations:[{start:{line:391,column:6},end:{line:393,column:7}},{start:{line:391,column:6},end:{line:393,column:7}}],line:391},'8':{loc:{start:{line:408,column:14},end:{line:430,column:15}},type:'if',locations:[{start:{line:408,column:14},end:{line:430,column:15}},{start:{line:408,column:14},end:{line:430,column:15}}],line:408},'9':{loc:{start:{line:456,column:36},end:{line:456,column:104}},type:'cond-expr',locations:[{start:{line:456,column:58},end:{line:456,column:93}},{start:{line:456,column:94},end:{line:456,column:104}}],line:456},'10':{loc:{start:{line:461,column:6},end:{line:463,column:7}},type:'if',locations:[{start:{line:461,column:6},end:{line:463,column:7}},{start:{line:461,column:6},end:{line:463,column:7}}],line:461},'11':{loc:{start:{line:472,column:10},end:{line:513,column:11}},type:'if',locations:[{start:{line:472,column:10},end:{line:513,column:11}},{start:{line:472,column:10},end:{line:513,column:11}}],line:472},'12':{loc:{start:{line:479,column:20},end:{line:494,column:21}},type:'if',locations:[{start:{line:479,column:20},end:{line:494,column:21}},{start:{line:479,column:20},end:{line:494,column:21}}],line:479}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0,'81':0,'82':0,'83':0,'84':0,'85':0,'86':0,'87':0,'88':0,'89':0,'90':0,'91':0,'92':0,'93':0,'94':0,'95':0,'96':0,'97':0,'98':0,'99':0,'100':0,'101':0,'102':0,'103':0,'104':0,'105':0,'106':0,'107':0,'108':0,'109':0,'110':0,'111':0,'112':0,'113':0,'114':0,'115':0,'116':0,'117':0,'118':0,'119':0,'120':0,'121':0,'122':0,'123':0,'124':0,'125':0,'126':0,'127':0,'128':0,'129':0,'130':0,'131':0,'132':0,'133':0,'134':0,'135':0,'136':0,'137':0,'138':0,'139':0,'140':0,'141':0,'142':0,'143':0,'144':0,'145':0,'146':0,'147':0,'148':0,'149':0,'150':0,'151':0,'152':0,'153':0,'154':0,'155':0,'156':0,'157':0,'158':0,'159':0,'160':0,'161':0,'162':0,'163':0,'164':0,'165':0,'166':0,'167':0,'168':0,'169':0,'170':0,'171':0,'172':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0},b:{'0':[0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const Database=(++cov_1e1zkd6vqh.s[0],require('../../db/database'));const File=(++cov_1e1zkd6vqh.s[1],require('../../files/_fileModel'));const DBCommonQueries=(++cov_1e1zkd6vqh.s[2],require('../../db/queries/user/_common.json'));const ClientMicroservice=(++cov_1e1zkd6vqh.s[3],require('../../microservices/client'));++cov_1e1zkd6vqh.s[4];global.CONTROL=require('./control');/**
@class
*/class User{/**
 @constructor
 @param {number} id_usuario - User ID
 @param {object} queries - User's profile queries
 */constructor(id_usuario=(++cov_1e1zkd6vqh.b[0][0],-1),queries){++cov_1e1zkd6vqh.f[0];++cov_1e1zkd6vqh.s[5];this._id_usuario=parseInt(id_usuario);++cov_1e1zkd6vqh.s[6];this._microservice_client=new ClientMicroservice();++cov_1e1zkd6vqh.s[7];this._db_connection=new Database();++cov_1e1zkd6vqh.s[8];this._file=new File();++cov_1e1zkd6vqh.s[9];this._profile_queries=queries;++cov_1e1zkd6vqh.s[10];this._common_queries=DBCommonQueries;}_logOnDB(){++cov_1e1zkd6vqh.f[1];}/**
  Close the connections associated to the user
  @return {null}
  */_close_connections(){++cov_1e1zkd6vqh.f[2];const _self=(++cov_1e1zkd6vqh.s[11],this);++cov_1e1zkd6vqh.s[12];_self._db_connection._close_connection();++cov_1e1zkd6vqh.s[13];_self._file._close_connection();}/**
  Returns the role associated to a specific user ID
  @return {Promise}
  */_get_type_of_user(){++cov_1e1zkd6vqh.f[3];const _self=(++cov_1e1zkd6vqh.s[14],this);++cov_1e1zkd6vqh.s[15];if(_self._id_usuario===-1){++cov_1e1zkd6vqh.b[1][0];++cov_1e1zkd6vqh.s[16];return"Administrador";}else{++cov_1e1zkd6vqh.b[1][1];}++cov_1e1zkd6vqh.s[17];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[4];++cov_1e1zkd6vqh.s[18];// if(global.CONTROL.users[_self._id_usuario]===undefined){
_self.get_user_info().then(result=>{++cov_1e1zkd6vqh.f[5];++cov_1e1zkd6vqh.s[19];_self._microservice_client.send_query(_self._common_queries.GET.type_of_user,{id_perfil:result.id_perfil}).then(data=>{++cov_1e1zkd6vqh.f[6];++cov_1e1zkd6vqh.s[20];resolve(data[0].descripcion);}).catch(err=>{++cov_1e1zkd6vqh.f[7];++cov_1e1zkd6vqh.s[21];reject(err);});}).catch(err=>{++cov_1e1zkd6vqh.f[8];++cov_1e1zkd6vqh.s[22];reject(err);});// }else{
//   resolve(global.CONTROL.users[_self._id_usuario].descripcion);
// }
});}/**
  Download the zip file associated to every content
  @param {string} filename - Route of the file to download
  @param {Response} response - The server response to associate the Buffer of the file to download
  */download_zip(filename,response){++cov_1e1zkd6vqh.f[9];const _self=(++cov_1e1zkd6vqh.s[23],this);++cov_1e1zkd6vqh.s[24];_self._file.downloadFile(filename,response);}/**
  Returns the info relative to each user (name,provider,etc...)
  @return {Promise}
  */get_user_info(){++cov_1e1zkd6vqh.f[10];const _self=(++cov_1e1zkd6vqh.s[25],this);++cov_1e1zkd6vqh.s[26];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[11];++cov_1e1zkd6vqh.s[27];_self._microservice_client.send_query(_self._common_queries.GET.user_info,{id_usuario:_self._id_usuario}).then(data=>{++cov_1e1zkd6vqh.f[12];++cov_1e1zkd6vqh.s[28];resolve(data[0]);}).catch(err=>{++cov_1e1zkd6vqh.f[13];++cov_1e1zkd6vqh.s[29];reject(err);});});}/***
  Returns basic info of the user to be used once the user is already logged
  @param {object} params - Contains the user_id that comes from the form
  @return {Promise}
  */get_login_info(params){++cov_1e1zkd6vqh.f[14];let _self=(++cov_1e1zkd6vqh.s[30],this);++cov_1e1zkd6vqh.s[31];return new Promise(function(resolve,reject){++cov_1e1zkd6vqh.f[15];++cov_1e1zkd6vqh.s[32];_self._microservice_client.send_query(_self._common_queries.GET.login_info,params).then(rows=>{++cov_1e1zkd6vqh.f[16];++cov_1e1zkd6vqh.s[33];if(rows.length===0){++cov_1e1zkd6vqh.b[2][0];++cov_1e1zkd6vqh.s[34];// Si no se encuentra registrado en la base de datos se le devuelve un codigo 401
// indicando que no esta autorizado y el token como null.
reject({token:null});}else{++cov_1e1zkd6vqh.b[2][1];++cov_1e1zkd6vqh.s[35];rows[0].imgAvatar=rows[0].urlAvatar;++cov_1e1zkd6vqh.s[36];rows[0].urlAvatar=undefined;++cov_1e1zkd6vqh.s[37];resolve({userInfo:rows[0]});}});});}/**
  Returns the extended content info that is used on the edit content page
  @param {number} id_contenido - ID of the content
  @return {Promise}
  */get_content_by_id(id_contenido){++cov_1e1zkd6vqh.f[17];const _self=(++cov_1e1zkd6vqh.s[38],this);++cov_1e1zkd6vqh.s[39];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[18];let arrayPromises=(++cov_1e1zkd6vqh.s[40],[]);++cov_1e1zkd6vqh.s[41];arrayPromises.push(_self._microservice_client.send_query(_self._common_queries.GET.content_id,{id_contenido:id_contenido}));++cov_1e1zkd6vqh.s[42];arrayPromises.push(_self._microservice_client.send_query(_self._common_queries.GET.tableOfCompatibilities,{id_contenido:id_contenido}));++cov_1e1zkd6vqh.s[43];arrayPromises.push(_self._microservice_client.send_query(_self._common_queries.GET.content_platforms,{id_contenido:id_contenido}));++cov_1e1zkd6vqh.s[44];arrayPromises.push(_self._microservice_client.send_query(_self._common_queries.GET.content_servers,{id_contenido:id_contenido}));++cov_1e1zkd6vqh.s[45];arrayPromises.push(_self._microservice_client.send_query(_self._common_queries.GET.content_recursos,{id_contenido:id_contenido}));++cov_1e1zkd6vqh.s[46];arrayPromises.push(_self._microservice_client.send_query(_self._common_queries.GET.content_categorias_subcategorias,{id_contenido:id_contenido}));++cov_1e1zkd6vqh.s[47];arrayPromises.push(_self._microservice_client.send_query(_self._common_queries.GET.content_licencias,{id_contenido:id_contenido}));++cov_1e1zkd6vqh.s[48];Promise.all(arrayPromises).then(values=>{++cov_1e1zkd6vqh.f[19];const content=(++cov_1e1zkd6vqh.s[49],values[0][0]);++cov_1e1zkd6vqh.s[50];content.compatibilities_table=values[1];++cov_1e1zkd6vqh.s[51];content.platforms=values[2];++cov_1e1zkd6vqh.s[52];content.servidores_contenidos=values[3];++cov_1e1zkd6vqh.s[53];content.recursos=values[4];++cov_1e1zkd6vqh.s[54];content.categorias=values[5];++cov_1e1zkd6vqh.s[55];Object.assign(content,values[6][0]);++cov_1e1zkd6vqh.s[56];resolve(content);}).catch(error=>{++cov_1e1zkd6vqh.f[20];++cov_1e1zkd6vqh.s[57];reject(error);});});}/**
  Returns all the contents associated to a provider
  @return {Promise}
  */get_contents(){++cov_1e1zkd6vqh.f[21];const _self=(++cov_1e1zkd6vqh.s[58],this);++cov_1e1zkd6vqh.s[59];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[22];++cov_1e1zkd6vqh.s[60];//Object.keys(global.CONTROL.users[_self._id_usuario]).length===0
_self.get_user_info().then(result=>{++cov_1e1zkd6vqh.f[23];++cov_1e1zkd6vqh.s[61];if(global.CONTROL.proveedor[result.id_proveedor]===undefined){++cov_1e1zkd6vqh.b[3][0];++cov_1e1zkd6vqh.s[62];_self._microservice_client.send_query(_self._profile_queries.GET.contents_proveedor,result).then(data=>{++cov_1e1zkd6vqh.f[24];++cov_1e1zkd6vqh.s[63];global.CONTROL.proveedor[result.id_proveedor]=data;++cov_1e1zkd6vqh.s[64];resolve(data);});}else{++cov_1e1zkd6vqh.b[3][1];++cov_1e1zkd6vqh.s[65];resolve(global.CONTROL.proveedor[result.id_proveedor]);}}).catch(err=>{++cov_1e1zkd6vqh.f[25];++cov_1e1zkd6vqh.s[66];reject(err);});});}/**
  Check if one course is completely certified
  @param {Form} form - Form that contains the info of the content to be checked
  @return {Promise}
  */_check_course_certified(form){++cov_1e1zkd6vqh.f[26];const _self=(++cov_1e1zkd6vqh.s[67],this);++cov_1e1zkd6vqh.s[68];return new Promise(function(resolve,reject){++cov_1e1zkd6vqh.f[27];++cov_1e1zkd6vqh.s[69];_self._microservice_client.send_query(_self._common_queries.GET.course_certified,{id_contenido:form.id_contenido}).then(data=>{++cov_1e1zkd6vqh.f[28];++cov_1e1zkd6vqh.s[70];if((++cov_1e1zkd6vqh.b[5][0],data[0]["count(*)"]>0)&&(++cov_1e1zkd6vqh.b[5][1],data[1]["count(*)"]>0)&&(++cov_1e1zkd6vqh.b[5][2],data[0]["count(*)"]-data[1]["count(*)"]===0)){++cov_1e1zkd6vqh.b[4][0];++cov_1e1zkd6vqh.s[71];// Send email of confirmation
_self._microservice_client.send_email({type:"course_certified",datos_curso:form}).then(()=>{++cov_1e1zkd6vqh.f[29];++cov_1e1zkd6vqh.s[72];resolve(true);});}else{++cov_1e1zkd6vqh.b[4][1];}}).catch(error=>{++cov_1e1zkd6vqh.f[30];++cov_1e1zkd6vqh.s[73];reject(error);});});}/**
  Returns all the contents associated to the catalog
  @return {Promise}
  */get_catalogo(){++cov_1e1zkd6vqh.f[31];const _self=(++cov_1e1zkd6vqh.s[74],this);++cov_1e1zkd6vqh.s[75];return new Promise(function(resolve,reject){++cov_1e1zkd6vqh.f[32];++cov_1e1zkd6vqh.s[76];_self._microservice_client.send_query(_self._common_queries.GET.content_catalogo).then(data=>{++cov_1e1zkd6vqh.f[33];++cov_1e1zkd6vqh.s[77];resolve(data);}).catch(error=>{++cov_1e1zkd6vqh.f[34];++cov_1e1zkd6vqh.s[78];reject(error);});});}/**
  Loads all the generic info relative to the application
  @return {Promise}
  */get_platform_generic_info(){++cov_1e1zkd6vqh.f[35];const _self=(++cov_1e1zkd6vqh.s[79],this);++cov_1e1zkd6vqh.s[80];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[36];++cov_1e1zkd6vqh.s[81];_self._microservice_client.send_query(_self._profile_queries.GET.generic_information,null).then(data=>{++cov_1e1zkd6vqh.f[37];let generic_info=(++cov_1e1zkd6vqh.s[82],{platforms:data[0],evaluationSystems:data[1],contentTypes:data[2],states:data[3],tabla_compatibilidades:data[4],educationLevels:data[5],exploitedRights:data[6],tipoProveedores:data[7],proyectos:data[8],idiomas:data[9],puntos_control:data[10],valores_certificacion:data[11],tecnologias:data[12],tipo_desarrollo:data[13],servidores_contenidos:data[14],proveedores:data[15],categorias:data[16],habilidades:data[17],recursos:data[18]});let arrayPromisesSubcategories=(++cov_1e1zkd6vqh.s[83],[]);++cov_1e1zkd6vqh.s[84];for(let i=0;i<generic_info.categorias.length;i++){++cov_1e1zkd6vqh.s[85];arrayPromisesSubcategories[i]=_self._microservice_client.send_query(_self._common_queries.GET.subcategorias,generic_info.categorias[i]);}++cov_1e1zkd6vqh.s[86];Promise.all(arrayPromisesSubcategories).then(values=>{++cov_1e1zkd6vqh.f[38];++cov_1e1zkd6vqh.s[87];for(let i=0;i<generic_info.categorias.length;i++){++cov_1e1zkd6vqh.s[88];generic_info.categorias[i].subcategorias=values[i];}++cov_1e1zkd6vqh.s[89];_self._close_connections();++cov_1e1zkd6vqh.s[90];resolve(generic_info);}).catch(err=>{++cov_1e1zkd6vqh.f[39];++cov_1e1zkd6vqh.s[91];reject(err);});}).catch(err=>{++cov_1e1zkd6vqh.f[40];++cov_1e1zkd6vqh.s[92];reject(err);});});}/**
  Returns the user's avatar using base64 codification
  @param {string} filename - Route of the avatar on the FTP
  @return {Promise}
  */get_avatar(filename){++cov_1e1zkd6vqh.f[41];const _self=(++cov_1e1zkd6vqh.s[93],this);++cov_1e1zkd6vqh.s[94];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[42];++cov_1e1zkd6vqh.s[95];_self._file.downloadImageInBase64(filename).then(data=>{++cov_1e1zkd6vqh.f[43];++cov_1e1zkd6vqh.s[96];resolve(data);}).catch(err=>{++cov_1e1zkd6vqh.f[44];++cov_1e1zkd6vqh.s[97];reject(err);});});}/**
  Method used to modify the user avatar
  @param {Form} form - Form that contains all the user info
  @param {File} file - File to be upload
  @return {Promise}
  */modify_avatar(form){++cov_1e1zkd6vqh.f[45];const _self=(++cov_1e1zkd6vqh.s[98],this);++cov_1e1zkd6vqh.s[99];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[46];++cov_1e1zkd6vqh.s[100];_self._microservice_client.send_query(_self._common_queries.UPDATE.avatar,form).then(data=>{++cov_1e1zkd6vqh.f[47];++cov_1e1zkd6vqh.s[101];_self._id_usuario=form.id_usuario;++cov_1e1zkd6vqh.s[102];_self._logOnDB("user.modify_avatar");++cov_1e1zkd6vqh.s[103];resolve(true);}).catch(error=>{++cov_1e1zkd6vqh.f[48];++cov_1e1zkd6vqh.s[104];reject(error);});});}/**
  Method used to modify the personal info of the user
  @param {object} form - Form that contains all the user info
  @return {Promise}
  */modify_personal_info(form){++cov_1e1zkd6vqh.f[49];const _self=(++cov_1e1zkd6vqh.s[105],this);++cov_1e1zkd6vqh.s[106];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[50];++cov_1e1zkd6vqh.s[107];_self._microservice_client.send_query(_self._common_queries.UPDATE.personalInfo,form).then(()=>{++cov_1e1zkd6vqh.f[51];++cov_1e1zkd6vqh.s[108];_self._logOnDB("user.modify_info");++cov_1e1zkd6vqh.s[109];resolve(true);}).catch(err=>{++cov_1e1zkd6vqh.f[52];++cov_1e1zkd6vqh.s[110];reject(err);});});}/**
  Method used to modify the password of the user
  @param {object} fields - Form that contains all the user info
  @return {Promise}
  */modify_password(fields){++cov_1e1zkd6vqh.f[53];const _self=(++cov_1e1zkd6vqh.s[111],this);++cov_1e1zkd6vqh.s[112];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[54];++cov_1e1zkd6vqh.s[113];_self._microservice_client.send_query(_self._common_queries.UPDATE.password,fields).then(()=>{++cov_1e1zkd6vqh.f[55];++cov_1e1zkd6vqh.s[114];_self._logOnDB("user.modify_password");++cov_1e1zkd6vqh.s[115];resolve(true);}).catch(err=>{++cov_1e1zkd6vqh.f[56];++cov_1e1zkd6vqh.s[116];reject(err);});});}/**
  IMPORTANT! This method creates a new course on the platform.
  @param {Form} form - Form that contains all the info of the new course, among the
  @return {Promise}
  */create_course(form){++cov_1e1zkd6vqh.f[57];const _self=(++cov_1e1zkd6vqh.s[117],this);++cov_1e1zkd6vqh.s[118];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[58];++cov_1e1zkd6vqh.s[119];form["multiple_insert_query"]=eval("["+form.tableTechnologies+"]");++cov_1e1zkd6vqh.s[120];form["table_platforms"]=eval("["+form.tablePlatforms+"]");++cov_1e1zkd6vqh.s[121];form["servidores_contenidos"]=form['tableServCont']?(++cov_1e1zkd6vqh.b[6][0],eval("["+form['tableServCont']+"]")):(++cov_1e1zkd6vqh.b[6][1],eval("[]"));++cov_1e1zkd6vqh.s[122];form["recursos"]=eval("["+form["tableRecursos"]+"]");++cov_1e1zkd6vqh.s[123];form["categorias"]=eval(form["categorias"]);++cov_1e1zkd6vqh.s[124];if(form['catalogo_ted']==1){++cov_1e1zkd6vqh.b[7][0];++cov_1e1zkd6vqh.s[125];global.CONTROL.catalogo=[];}else{++cov_1e1zkd6vqh.b[7][1];}++cov_1e1zkd6vqh.s[126];_self._microservice_client.send_query(_self._common_queries.GET.info_proveedor,form).then(data=>{++cov_1e1zkd6vqh.f[59];++cov_1e1zkd6vqh.s[127];form['carpeta_proveedor']=data[0].carpeta_proveedor;++cov_1e1zkd6vqh.s[128];_self._file.uploadContentFile(form['file_to_upload'],form,_self._file._config.fileUpload.directory,_self._file._config.fileUpload.extensionsAllowed).then(()=>{++cov_1e1zkd6vqh.f[60];++cov_1e1zkd6vqh.s[129];_self._db_connection.insert_new_content(form,_self._profile_queries).then(()=>{++cov_1e1zkd6vqh.f[61];++cov_1e1zkd6vqh.s[130];global.CONTROL.proveedor[form['id_proveedor']]=undefined;++cov_1e1zkd6vqh.s[131];_self._file._ftp.extractZIP(form['file_to_upload'],form['ruta_zip']).then(data=>{++cov_1e1zkd6vqh.f[62];++cov_1e1zkd6vqh.s[132];if(data){++cov_1e1zkd6vqh.b[8][0];++cov_1e1zkd6vqh.s[133];form['rutaEjecucion']=data;++cov_1e1zkd6vqh.s[134];_self._microservice_client.send_query(_self._profile_queries.UPDATE.rutaEjecucion,{rutaEjecucion:form['rutaEjecucion'],id_contenido:form['id_contenido']}).then(()=>{++cov_1e1zkd6vqh.f[63];++cov_1e1zkd6vqh.s[135];_self._microservice_client.send_email({type:"new_course",datos_curso:form}).then(()=>{++cov_1e1zkd6vqh.f[64];++cov_1e1zkd6vqh.s[136];_self._check_course_certified(form).then(()=>{++cov_1e1zkd6vqh.f[65];++cov_1e1zkd6vqh.s[137];_self._close_connections();});});});}else{++cov_1e1zkd6vqh.b[8][1];}});++cov_1e1zkd6vqh.s[138];resolve(true);}).catch(error=>{++cov_1e1zkd6vqh.f[66];++cov_1e1zkd6vqh.s[139];console.error(error);++cov_1e1zkd6vqh.s[140];reject(error);});});});});}modify_course(form){++cov_1e1zkd6vqh.f[67];const _self=(++cov_1e1zkd6vqh.s[141],this);++cov_1e1zkd6vqh.s[142];return new Promise((resolve,reject)=>{++cov_1e1zkd6vqh.f[68];++cov_1e1zkd6vqh.s[143];// Once the form is parsed, we call the "close" function to send back the response
form["fecha_alta"]=_self._file._returnActualDate();++cov_1e1zkd6vqh.s[144];form["multiple_insert_query"]=eval("["+form.tableTechnologies+"]");++cov_1e1zkd6vqh.s[145];form["table_platforms"]=eval("["+form.tablePlatforms+"]");++cov_1e1zkd6vqh.s[146];form["servidores_contenidos"]=form['tableServCont']?(++cov_1e1zkd6vqh.b[9][0],eval("["+form['tableServCont']+"]")):(++cov_1e1zkd6vqh.b[9][1],eval("[]"));++cov_1e1zkd6vqh.s[147];form["recursos"]=eval("["+form["tableRecursos"]+"]");++cov_1e1zkd6vqh.s[148];form["categorias"]=eval(form["categorias"]);++cov_1e1zkd6vqh.s[149];if(form["catalogo_ted"]==1){++cov_1e1zkd6vqh.b[10][0];++cov_1e1zkd6vqh.s[150];global.CONTROL.catalogo=[];}else{++cov_1e1zkd6vqh.b[10][1];}++cov_1e1zkd6vqh.s[151];_self._microservice_client.send_query(_self._common_queries.GET.info_proveedor,form).then(data=>{++cov_1e1zkd6vqh.f[69];++cov_1e1zkd6vqh.s[152];form["carpeta_proveedor"]=data[0].carpeta_proveedor;// Si le pasamos el fichero para subir, el proceso es el mismo que el de creacion, pero haciendo update en vez de insert en la base de datos
++cov_1e1zkd6vqh.s[153];_self.get_content_by_id(form["id_contenido"]).then(content=>{++cov_1e1zkd6vqh.f[70];++cov_1e1zkd6vqh.s[154];global.CONTROL.proveedor[form['id_proveedor']]=undefined;++cov_1e1zkd6vqh.s[155];if(form['file_to_upload']){++cov_1e1zkd6vqh.b[11][0];++cov_1e1zkd6vqh.s[156];_self._file.uploadContentFile(form['file_to_upload'],form,_self._file._config.fileUpload.directory,_self._file._config.fileUpload.extensionsAllowed).then(()=>{++cov_1e1zkd6vqh.f[71];++cov_1e1zkd6vqh.s[157];_self._db_connection.update_content(content,_self._profile_queries,form,true).then(()=>{++cov_1e1zkd6vqh.f[72];++cov_1e1zkd6vqh.s[158];_self._file._ftp.extractZIP(form['file_to_upload'],form['ruta_zip']).then(data=>{++cov_1e1zkd6vqh.f[73];++cov_1e1zkd6vqh.s[159];if(data){++cov_1e1zkd6vqh.b[12][0];++cov_1e1zkd6vqh.s[160];form['rutaEjecucion']=data;++cov_1e1zkd6vqh.s[161];_self._microservice_client.send_query(_self._profile_queries.UPDATE.rutaEjecucion,{rutaEjecucion:"http://"+form['rutaEjecucion'],id_contenido:form['id_contenido']}).then(()=>{++cov_1e1zkd6vqh.f[74];++cov_1e1zkd6vqh.s[162];_self._microservice_client.send_email("upload_course");++cov_1e1zkd6vqh.s[163];_self._db_connection._close_connection();}).catch(err=>{++cov_1e1zkd6vqh.f[75];++cov_1e1zkd6vqh.s[164];console.log(err);});}else{++cov_1e1zkd6vqh.b[12][1];}});++cov_1e1zkd6vqh.s[165];resolve(true);});}).catch(err=>{++cov_1e1zkd6vqh.f[76];++cov_1e1zkd6vqh.s[166];reject(err);});}else{++cov_1e1zkd6vqh.b[11][1];++cov_1e1zkd6vqh.s[167];// Si no le pasamos un fichero, tenemos que mantener la misma ruta del zip que ya hay hasta el momento
_self._db_connection.update_content(content,_self._profile_queries,form).then(()=>{++cov_1e1zkd6vqh.f[77];++cov_1e1zkd6vqh.s[168];resolve(true);}).catch(err=>{++cov_1e1zkd6vqh.f[78];++cov_1e1zkd6vqh.s[169];reject(err);});}}).catch(error=>{++cov_1e1zkd6vqh.f[79];++cov_1e1zkd6vqh.s[170];reject(error);});}).catch(err=>{++cov_1e1zkd6vqh.f[80];++cov_1e1zkd6vqh.s[171];reject(err);});});}//END OF THE USER CLASS --> DONT TOUCH THE BRACKET
}++cov_1e1zkd6vqh.s[172];module.exports=User;