var cov_aur773x68=function(){var path='/Users/je10617/Desktop/express-authenticate/email/email_sender.js',hash='4bbe8edc87fa267eaf0b4379eb6957a5266a2f08',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/je10617/Desktop/express-authenticate/email/email_sender.js',statementMap:{'0':{start:{line:1,column:13},end:{line:1,column:37}},'1':{start:{line:2,column:17},end:{line:2,column:38}},'2':{start:{line:3,column:9},end:{line:3,column:22}},'3':{start:{line:7,column:4},end:{line:7,column:82}},'4':{start:{line:8,column:4},end:{line:8,column:39}},'5':{start:{line:12,column:4},end:{line:15,column:5}},'6':{start:{line:13,column:19},end:{line:13,column:43}},'7':{start:{line:14,column:6},end:{line:14,column:43}},'8':{start:{line:14,column:27},end:{line:14,column:43}},'9':{start:{line:16,column:4},end:{line:16,column:11}},'10':{start:{line:21,column:21},end:{line:21,column:108}},'11':{start:{line:22,column:4},end:{line:24,column:5}},'12':{start:{line:23,column:6},end:{line:23,column:79}},'13':{start:{line:25,column:4},end:{line:25,column:16}},'14':{start:{line:31,column:16},end:{line:31,column:20}},'15':{start:{line:32,column:19},end:{line:32,column:47}},'16':{start:{line:33,column:4},end:{line:33,column:48}},'17':{start:{line:34,column:22},end:{line:34,column:24}},'18':{start:{line:35,column:4},end:{line:64,column:7}},'19':{start:{line:37,column:6},end:{line:37,column:99}},'20':{start:{line:39,column:6},end:{line:41,column:9}},'21':{start:{line:40,column:8},end:{line:40,column:40}},'22':{start:{line:42,column:6},end:{line:61,column:9}},'23':{start:{line:43,column:10},end:{line:43,column:60}},'24':{start:{line:44,column:10},end:{line:50,column:13}},'25':{start:{line:51,column:10},end:{line:57,column:13}},'26':{start:{line:52,column:14},end:{line:56,column:15}},'27':{start:{line:53,column:16},end:{line:53,column:30}},'28':{start:{line:55,column:16},end:{line:55,column:61}},'29':{start:{line:71,column:0},end:{line:71,column:27}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:15},end:{line:9,column:3}},line:6},'1':{name:'(anonymous_1)',decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:35},end:{line:17,column:3}},line:11},'2':{name:'(anonymous_2)',decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:41},end:{line:26,column:3}},line:20},'3':{name:'(anonymous_3)',decl:{start:{line:30,column:2},end:{line:30,column:3}},loc:{start:{line:30,column:39},end:{line:65,column:3}},line:30},'4':{name:'(anonymous_4)',decl:{start:{line:35,column:23},end:{line:35,column:24}},loc:{start:{line:35,column:49},end:{line:64,column:5}},line:35},'5':{name:'(anonymous_5)',decl:{start:{line:39,column:41},end:{line:39,column:42}},loc:{start:{line:39,column:52},end:{line:41,column:7}},line:39},'6':{name:'(anonymous_6)',decl:{start:{line:42,column:40},end:{line:42,column:41}},loc:{start:{line:42,column:46},end:{line:61,column:7}},line:42},'7':{name:'(anonymous_7)',decl:{start:{line:51,column:60},end:{line:51,column:61}},loc:{start:{line:51,column:85},end:{line:57,column:11}},line:51}},branchMap:{'0':{loc:{start:{line:11,column:19},end:{line:11,column:34}},type:'default-arg',locations:[{start:{line:11,column:22},end:{line:11,column:34}}],line:11},'1':{loc:{start:{line:14,column:6},end:{line:14,column:43}},type:'if',locations:[{start:{line:14,column:6},end:{line:14,column:43}},{start:{line:14,column:6},end:{line:14,column:43}}],line:14},'2':{loc:{start:{line:20,column:20},end:{line:20,column:27}},type:'default-arg',locations:[{start:{line:20,column:25},end:{line:20,column:27}}],line:20},'3':{loc:{start:{line:30,column:13},end:{line:30,column:30}},type:'default-arg',locations:[{start:{line:30,column:18},end:{line:30,column:30}}],line:30},'4':{loc:{start:{line:30,column:31},end:{line:30,column:38}},type:'default-arg',locations:[{start:{line:30,column:36},end:{line:30,column:38}}],line:30},'5':{loc:{start:{line:52,column:14},end:{line:56,column:15}},type:'if',locations:[{start:{line:52,column:14},end:{line:56,column:15}},{start:{line:52,column:14},end:{line:56,column:15}}],line:52}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0},b:{'0':[0],'1':[0,0],'2':[0],'3':[0],'4':[0],'5':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const CONFIG=(++cov_aur773x68.s[0],require('./config.json'));const nodemailer=(++cov_aur773x68.s[1],require('nodemailer'));const fs=(++cov_aur773x68.s[2],require('fs'));class EmailSender{constructor(){++cov_aur773x68.f[0];++cov_aur773x68.s[3];this._smtpTransport=nodemailer.createTransport(CONFIG.BASIC_CONF.server_IP);++cov_aur773x68.s[4];this.mail_options=CONFIG.MAIL_INFO;}_config_template(id=(++cov_aur773x68.b[0][0],"new_course")){++cov_aur773x68.f[1];++cov_aur773x68.s[5];for(let i=0;i<CONFIG.TEMPLATES_CONF.length;i++){let template=(++cov_aur773x68.s[6],CONFIG.TEMPLATES_CONF[i]);++cov_aur773x68.s[7];if(template.id===id){++cov_aur773x68.b[1][0];++cov_aur773x68.s[8];return template;}else{++cov_aur773x68.b[1][1];}}++cov_aur773x68.s[9];return;}replace_variables(html=(++cov_aur773x68.b[2][0],""),info_content){++cov_aur773x68.f[2];const email_info=(++cov_aur773x68.s[10],["titulo_curso","num_certificados","num_contenidos","horas_formacion","ruta_ejecucion"]);++cov_aur773x68.s[11];for(let i=0;i<email_info.length;i++){++cov_aur773x68.s[12];html=html.split("{"+email_info[i]+"}").join(info_content[email_info[i]]);}++cov_aur773x68.s[13];return html;}send_email(type=(++cov_aur773x68.b[3][0],"new_course"),info=(++cov_aur773x68.b[4][0],{})){++cov_aur773x68.f[3];const _self=(++cov_aur773x68.s[14],this);const template=(++cov_aur773x68.s[15],_self._config_template(type));++cov_aur773x68.s[16];_self.mail_options.subject=template.subject;let index_content=(++cov_aur773x68.s[17],"");++cov_aur773x68.s[18];return new Promise(function(resolve,reject){++cov_aur773x68.f[4];++cov_aur773x68.s[19];_self.mail_options.html=fs.createReadStream(__dirname+template.folder_template+'/mail.html');++cov_aur773x68.s[20];_self.mail_options.html.on('data',chunk=>{++cov_aur773x68.f[5];++cov_aur773x68.s[21];index_content+=chunk.toString();});++cov_aur773x68.s[22];_self.mail_options.html.on('end',()=>{++cov_aur773x68.f[6];++cov_aur773x68.s[23];console.log("Titulo del curso: "+info.toString());++cov_aur773x68.s[24];_self.mail_options.html=_self.replace_variables(index_content,{titulo_curso:info.titulo,num_certificados:"56",num_contenidos:"110",horas_formacion:"255",ruta_ejecucion:info.rutaEjecucion});++cov_aur773x68.s[25];_self._smtpTransport.sendMail(_self.mail_options,function(error,response){++cov_aur773x68.f[7];++cov_aur773x68.s[26];if(error){++cov_aur773x68.b[5][0];++cov_aur773x68.s[27];reject(error);}else{++cov_aur773x68.b[5][1];++cov_aur773x68.s[28];resolve("Email sended...."+response.message);}});});});}}++cov_aur773x68.s[29];module.exports=EmailSender;