var cov_28o7us3tgy=function(){var path='/Users/je10617/Desktop/express-authenticate/db/database.js',hash='8d797e63c404e651f70482ba99e4315f5b194a2e',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/je10617/Desktop/express-authenticate/db/database.js',statementMap:{'0':{start:{line:1,column:14},end:{line:1,column:30}},'1':{start:{line:2,column:26},end:{line:2,column:50}},'2':{start:{line:3,column:18},end:{line:3,column:47}},'3':{start:{line:11,column:4},end:{line:11,column:41}},'4':{start:{line:12,column:4},end:{line:12,column:67}},'5':{start:{line:13,column:4},end:{line:13,column:34}},'6':{start:{line:16,column:4},end:{line:18,column:7}},'7':{start:{line:17,column:6},end:{line:17,column:27}},'8':{start:{line:23,column:16},end:{line:23,column:20}},'9':{start:{line:24,column:4},end:{line:24,column:32}},'10':{start:{line:44,column:4},end:{line:46,column:5}},'11':{start:{line:45,column:6},end:{line:45,column:20}},'12':{start:{line:47,column:18},end:{line:47,column:40}},'13':{start:{line:48,column:4},end:{line:48,column:48}},'14':{start:{line:54,column:16},end:{line:54,column:20}},'15':{start:{line:55,column:21},end:{line:55,column:23}},'16':{start:{line:56,column:4},end:{line:56,column:42}},'17':{start:{line:57,column:4},end:{line:65,column:5}},'18':{start:{line:58,column:16},end:{line:58,column:26}},'19':{start:{line:59,column:6},end:{line:63,column:7}},'20':{start:{line:60,column:8},end:{line:62,column:9}},'21':{start:{line:61,column:10},end:{line:61,column:184}},'22':{start:{line:64,column:6},end:{line:64,column:31}},'23':{start:{line:66,column:4},end:{line:66,column:34}},'24':{start:{line:71,column:19},end:{line:71,column:21}},'25':{start:{line:72,column:4},end:{line:77,column:5}},'26':{start:{line:74,column:6},end:{line:74,column:31}},'27':{start:{line:74,column:14},end:{line:74,column:31}},'28':{start:{line:76,column:6},end:{line:76,column:154}},'29':{start:{line:78,column:4},end:{line:78,column:46}},'30':{start:{line:82,column:19},end:{line:82,column:21}},'31':{start:{line:83,column:4},end:{line:90,column:5}},'32':{start:{line:85,column:6},end:{line:85,column:31}},'33':{start:{line:85,column:14},end:{line:85,column:31}},'34':{start:{line:89,column:6},end:{line:89,column:68}},'35':{start:{line:91,column:4},end:{line:91,column:46}},'36':{start:{line:95,column:19},end:{line:95,column:21}},'37':{start:{line:96,column:4},end:{line:100,column:5}},'38':{start:{line:97,column:6},end:{line:97,column:31}},'39':{start:{line:97,column:14},end:{line:97,column:31}},'40':{start:{line:99,column:6},end:{line:99,column:107}},'41':{start:{line:101,column:4},end:{line:101,column:46}},'42':{start:{line:106,column:19},end:{line:106,column:21}},'43':{start:{line:107,column:4},end:{line:110,column:5}},'44':{start:{line:108,column:6},end:{line:108,column:31}},'45':{start:{line:108,column:14},end:{line:108,column:31}},'46':{start:{line:109,column:6},end:{line:109,column:68}},'47':{start:{line:111,column:4},end:{line:111,column:46}},'48':{start:{line:115,column:19},end:{line:115,column:21}},'49':{start:{line:116,column:4},end:{line:119,column:5}},'50':{start:{line:117,column:6},end:{line:117,column:31}},'51':{start:{line:117,column:14},end:{line:117,column:31}},'52':{start:{line:118,column:6},end:{line:118,column:68}},'53':{start:{line:120,column:4},end:{line:120,column:46}},'54':{start:{line:127,column:16},end:{line:127,column:20}},'55':{start:{line:129,column:4},end:{line:148,column:7}},'56':{start:{line:132,column:6},end:{line:134,column:7}},'57':{start:{line:133,column:8},end:{line:133,column:22}},'58':{start:{line:136,column:6},end:{line:136,column:60}},'59':{start:{line:139,column:6},end:{line:147,column:9}},'60':{start:{line:141,column:8},end:{line:143,column:9}},'61':{start:{line:142,column:10},end:{line:142,column:22}},'62':{start:{line:146,column:8},end:{line:146,column:22}},'63':{start:{line:154,column:4},end:{line:159,column:9}},'64':{start:{line:165,column:18},end:{line:165,column:22}},'65':{start:{line:167,column:6},end:{line:275,column:9}},'66':{start:{line:171,column:8},end:{line:171,column:102}},'67':{start:{line:172,column:8},end:{line:172,column:138}},'68':{start:{line:173,column:8},end:{line:173,column:135}},'69':{start:{line:174,column:8},end:{line:174,column:126}},'70':{start:{line:175,column:8},end:{line:175,column:135}},'71':{start:{line:177,column:8},end:{line:274,column:11}},'72':{start:{line:180,column:10},end:{line:180,column:56}},'73':{start:{line:183,column:33},end:{line:183,column:35}},'74':{start:{line:185,column:10},end:{line:188,column:11}},'75':{start:{line:186,column:12},end:{line:187,column:149}},'76':{start:{line:190,column:10},end:{line:195,column:14}},'77':{start:{line:198,column:10},end:{line:204,column:11}},'78':{start:{line:199,column:12},end:{line:203,column:16}},'79':{start:{line:207,column:10},end:{line:211,column:11}},'80':{start:{line:208,column:12},end:{line:208,column:127}},'81':{start:{line:209,column:12},end:{line:209,column:133}},'82':{start:{line:210,column:12},end:{line:210,column:126}},'83':{start:{line:213,column:10},end:{line:219,column:11}},'84':{start:{line:214,column:12},end:{line:218,column:16}},'85':{start:{line:224,column:10},end:{line:228,column:14}},'86':{start:{line:230,column:10},end:{line:236,column:11}},'87':{start:{line:231,column:12},end:{line:235,column:16}},'88':{start:{line:239,column:10},end:{line:245,column:11}},'89':{start:{line:240,column:12},end:{line:244,column:16}},'90':{start:{line:248,column:10},end:{line:251,column:11}},'91':{start:{line:249,column:12},end:{line:250,column:137}},'92':{start:{line:253,column:10},end:{line:255,column:11}},'93':{start:{line:254,column:12},end:{line:254,column:125}},'94':{start:{line:256,column:10},end:{line:258,column:11}},'95':{start:{line:257,column:12},end:{line:257,column:120}},'96':{start:{line:260,column:10},end:{line:262,column:11}},'97':{start:{line:261,column:12},end:{line:261,column:39}},'98':{start:{line:264,column:10},end:{line:264,column:58}},'99':{start:{line:266,column:10},end:{line:271,column:13}},'100':{start:{line:267,column:12},end:{line:267,column:26}},'101':{start:{line:270,column:12},end:{line:270,column:26}},'102':{start:{line:273,column:10},end:{line:273,column:22}},'103':{start:{line:280,column:16},end:{line:280,column:20}},'104':{start:{line:282,column:4},end:{line:439,column:9}},'105':{start:{line:283,column:6},end:{line:283,column:36}},'106':{start:{line:285,column:29},end:{line:285,column:31}},'107':{start:{line:286,column:6},end:{line:286,column:100}},'108':{start:{line:287,column:6},end:{line:287,column:136}},'109':{start:{line:288,column:6},end:{line:288,column:133}},'110':{start:{line:289,column:6},end:{line:289,column:124}},'111':{start:{line:290,column:6},end:{line:290,column:133}},'112':{start:{line:291,column:6},end:{line:291,column:106}},'113':{start:{line:293,column:6},end:{line:293,column:159}},'114':{start:{line:295,column:6},end:{line:301,column:7}},'115':{start:{line:296,column:8},end:{line:298,column:9}},'116':{start:{line:297,column:10},end:{line:297,column:168}},'117':{start:{line:299,column:8},end:{line:300,column:145}},'118':{start:{line:303,column:6},end:{line:314,column:7}},'119':{start:{line:304,column:8},end:{line:307,column:9}},'120':{start:{line:305,column:10},end:{line:306,column:57}},'121':{start:{line:308,column:8},end:{line:312,column:12}},'122':{start:{line:317,column:6},end:{line:328,column:7}},'123':{start:{line:320,column:8},end:{line:320,column:129}},'124':{start:{line:321,column:8},end:{line:321,column:188}},'125':{start:{line:324,column:8},end:{line:326,column:9}},'126':{start:{line:325,column:10},end:{line:325,column:152}},'127':{start:{line:327,column:8},end:{line:327,column:122}},'128':{start:{line:330,column:6},end:{line:347,column:7}},'129':{start:{line:333,column:8},end:{line:345,column:9}},'130':{start:{line:334,column:10},end:{line:338,column:14}},'131':{start:{line:340,column:10},end:{line:344,column:14}},'132':{start:{line:350,column:6},end:{line:354,column:10}},'133':{start:{line:358,column:6},end:{line:374,column:7}},'134':{start:{line:360,column:8},end:{line:372,column:9}},'135':{start:{line:361,column:10},end:{line:365,column:14}},'136':{start:{line:367,column:10},end:{line:371,column:14}},'137':{start:{line:376,column:6},end:{line:388,column:7}},'138':{start:{line:377,column:8},end:{line:381,column:12}},'139':{start:{line:382,column:12},end:{line:388,column:7}},'140':{start:{line:383,column:8},end:{line:387,column:12}},'141':{start:{line:390,column:6},end:{line:402,column:7}},'142':{start:{line:391,column:8},end:{line:395,column:12}},'143':{start:{line:396,column:12},end:{line:402,column:7}},'144':{start:{line:397,column:8},end:{line:401,column:12}},'145':{start:{line:405,column:6},end:{line:407,column:7}},'146':{start:{line:406,column:8},end:{line:406,column:116}},'147':{start:{line:409,column:6},end:{line:417,column:7}},'148':{start:{line:410,column:8},end:{line:416,column:9}},'149':{start:{line:411,column:10},end:{line:412,column:252}},'150':{start:{line:414,column:10},end:{line:415,column:252}},'151':{start:{line:422,column:6},end:{line:428,column:7}},'152':{start:{line:423,column:8},end:{line:427,column:9}},'153':{start:{line:424,column:10},end:{line:424,column:123}},'154':{start:{line:426,column:10},end:{line:426,column:123}},'155':{start:{line:430,column:6},end:{line:430,column:54}},'156':{start:{line:432,column:6},end:{line:437,column:9}},'157':{start:{line:433,column:8},end:{line:433,column:22}},'158':{start:{line:436,column:8},end:{line:436,column:22}},'159':{start:{line:448,column:0},end:{line:448,column:24}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:15},end:{line:20,column:3}},line:10},'1':{name:'(anonymous_1)',decl:{start:{line:16,column:34},end:{line:16,column:35}},loc:{start:{line:16,column:49},end:{line:18,column:5}},line:16},'2':{name:'(anonymous_2)',decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:21},end:{line:25,column:3}},line:22},'3':{name:'(anonymous_3)',decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:32},end:{line:41,column:3}},line:27},'4':{name:'(anonymous_4)',decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:32},end:{line:49,column:3}},line:43},'5':{name:'(anonymous_5)',decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:42},end:{line:67,column:3}},line:53},'6':{name:'(anonymous_6)',decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:75},end:{line:79,column:3}},line:70},'7':{name:'(anonymous_7)',decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:47},end:{line:92,column:3}},line:81},'8':{name:'(anonymous_8)',decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:42},end:{line:102,column:3}},line:94},'9':{name:'(anonymous_9)',decl:{start:{line:105,column:2},end:{line:105,column:3}},loc:{start:{line:105,column:45},end:{line:112,column:3}},line:105},'10':{name:'(anonymous_10)',decl:{start:{line:114,column:2},end:{line:114,column:3}},loc:{start:{line:114,column:47},end:{line:121,column:3}},line:114},'11':{name:'(anonymous_11)',decl:{start:{line:125,column:2},end:{line:125,column:3}},loc:{start:{line:125,column:28},end:{line:150,column:3}},line:125},'12':{name:'(anonymous_12)',decl:{start:{line:129,column:23},end:{line:129,column:24}},loc:{start:{line:129,column:47},end:{line:148,column:5}},line:129},'13':{name:'(anonymous_13)',decl:{start:{line:139,column:37},end:{line:139,column:38}},loc:{start:{line:139,column:57},end:{line:147,column:7}},line:139},'14':{name:'(anonymous_14)',decl:{start:{line:152,column:2},end:{line:152,column:3}},loc:{start:{line:152,column:25},end:{line:160,column:5}},line:152},'15':{name:'(anonymous_15)',decl:{start:{line:163,column:2},end:{line:163,column:3}},loc:{start:{line:163,column:51},end:{line:276,column:5}},line:163},'16':{name:'(anonymous_16)',decl:{start:{line:167,column:25},end:{line:167,column:26}},loc:{start:{line:167,column:43},end:{line:275,column:7}},line:167},'17':{name:'(anonymous_17)',decl:{start:{line:177,column:75},end:{line:177,column:76}},loc:{start:{line:177,column:82},end:{line:272,column:9}},line:177},'18':{name:'(anonymous_18)',decl:{start:{line:266,column:51},end:{line:266,column:52}},loc:{start:{line:266,column:55},end:{line:268,column:11}},line:266},'19':{name:'(anonymous_19)',decl:{start:{line:269,column:17},end:{line:269,column:18}},loc:{start:{line:269,column:26},end:{line:271,column:11}},line:269},'20':{name:'(anonymous_20)',decl:{start:{line:272,column:17},end:{line:272,column:18}},loc:{start:{line:272,column:24},end:{line:274,column:9}},line:272},'21':{name:'(anonymous_21)',decl:{start:{line:278,column:2},end:{line:278,column:3}},loc:{start:{line:278,column:73},end:{line:441,column:5}},line:278},'22':{name:'(anonymous_22)',decl:{start:{line:282,column:23},end:{line:282,column:24}},loc:{start:{line:282,column:49},end:{line:439,column:7}},line:282},'23':{name:'(anonymous_23)',decl:{start:{line:432,column:47},end:{line:432,column:48}},loc:{start:{line:432,column:51},end:{line:434,column:7}},line:432},'24':{name:'(anonymous_24)',decl:{start:{line:435,column:13},end:{line:435,column:14}},loc:{start:{line:435,column:22},end:{line:437,column:7}},line:435}},branchMap:{'0':{loc:{start:{line:27,column:15},end:{line:27,column:24}},type:'default-arg',locations:[{start:{line:27,column:22},end:{line:27,column:24}}],line:27},'1':{loc:{start:{line:27,column:25},end:{line:27,column:31}},type:'default-arg',locations:[{start:{line:27,column:29},end:{line:27,column:31}}],line:27},'2':{loc:{start:{line:43,column:22},end:{line:43,column:31}},type:'default-arg',locations:[{start:{line:43,column:29},end:{line:43,column:31}}],line:43},'3':{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:'if',locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:44,column:4},end:{line:46,column:5}}],line:44},'4':{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:'if',locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:60,column:8},end:{line:62,column:9}}],line:60},'5':{loc:{start:{line:61,column:16},end:{line:61,column:183}},type:'cond-expr',locations:[{start:{line:61,column:35},end:{line:61,column:40}},{start:{line:61,column:41},end:{line:61,column:183}}],line:61},'6':{loc:{start:{line:61,column:71},end:{line:61,column:182}},type:'cond-expr',locations:[{start:{line:61,column:124},end:{line:61,column:167}},{start:{line:61,column:168},end:{line:61,column:182}}],line:61},'7':{loc:{start:{line:61,column:72},end:{line:61,column:122}},type:'binary-expr',locations:[{start:{line:61,column:72},end:{line:61,column:88}},{start:{line:61,column:92},end:{line:61,column:122}}],line:61},'8':{loc:{start:{line:74,column:6},end:{line:74,column:31}},type:'if',locations:[{start:{line:74,column:6},end:{line:74,column:31}},{start:{line:74,column:6},end:{line:74,column:31}}],line:74},'9':{loc:{start:{line:85,column:6},end:{line:85,column:31}},type:'if',locations:[{start:{line:85,column:6},end:{line:85,column:31}},{start:{line:85,column:6},end:{line:85,column:31}}],line:85},'10':{loc:{start:{line:97,column:6},end:{line:97,column:31}},type:'if',locations:[{start:{line:97,column:6},end:{line:97,column:31}},{start:{line:97,column:6},end:{line:97,column:31}}],line:97},'11':{loc:{start:{line:108,column:6},end:{line:108,column:31}},type:'if',locations:[{start:{line:108,column:6},end:{line:108,column:31}},{start:{line:108,column:6},end:{line:108,column:31}}],line:108},'12':{loc:{start:{line:117,column:6},end:{line:117,column:31}},type:'if',locations:[{start:{line:117,column:6},end:{line:117,column:31}},{start:{line:117,column:6},end:{line:117,column:31}}],line:117},'13':{loc:{start:{line:125,column:18},end:{line:125,column:27}},type:'default-arg',locations:[{start:{line:125,column:25},end:{line:125,column:27}}],line:125},'14':{loc:{start:{line:132,column:6},end:{line:134,column:7}},type:'if',locations:[{start:{line:132,column:6},end:{line:134,column:7}},{start:{line:132,column:6},end:{line:134,column:7}}],line:132},'15':{loc:{start:{line:141,column:8},end:{line:143,column:9}},type:'if',locations:[{start:{line:141,column:8},end:{line:143,column:9}},{start:{line:141,column:8},end:{line:143,column:9}}],line:141},'16':{loc:{start:{line:171,column:34},end:{line:171,column:101}},type:'cond-expr',locations:[{start:{line:171,column:59},end:{line:171,column:81}},{start:{line:171,column:82},end:{line:171,column:101}}],line:171},'17':{loc:{start:{line:172,column:46},end:{line:172,column:137}},type:'cond-expr',locations:[{start:{line:172,column:83},end:{line:172,column:117}},{start:{line:172,column:118},end:{line:172,column:137}}],line:172},'18':{loc:{start:{line:173,column:45},end:{line:173,column:134}},type:'cond-expr',locations:[{start:{line:173,column:81},end:{line:173,column:114}},{start:{line:173,column:115},end:{line:173,column:134}}],line:173},'19':{loc:{start:{line:174,column:42},end:{line:174,column:125}},type:'cond-expr',locations:[{start:{line:174,column:75},end:{line:174,column:105}},{start:{line:174,column:106},end:{line:174,column:125}}],line:174},'20':{loc:{start:{line:175,column:45},end:{line:175,column:134}},type:'cond-expr',locations:[{start:{line:175,column:81},end:{line:175,column:114}},{start:{line:175,column:115},end:{line:175,column:134}}],line:175},'21':{loc:{start:{line:185,column:10},end:{line:188,column:11}},type:'if',locations:[{start:{line:185,column:10},end:{line:188,column:11}},{start:{line:185,column:10},end:{line:188,column:11}}],line:185},'22':{loc:{start:{line:185,column:13},end:{line:185,column:80}},type:'binary-expr',locations:[{start:{line:185,column:13},end:{line:185,column:40}},{start:{line:185,column:44},end:{line:185,column:80}}],line:185},'23':{loc:{start:{line:198,column:10},end:{line:204,column:11}},type:'if',locations:[{start:{line:198,column:10},end:{line:204,column:11}},{start:{line:198,column:10},end:{line:204,column:11}}],line:198},'24':{loc:{start:{line:207,column:10},end:{line:211,column:11}},type:'if',locations:[{start:{line:207,column:10},end:{line:211,column:11}},{start:{line:207,column:10},end:{line:211,column:11}}],line:207},'25':{loc:{start:{line:213,column:10},end:{line:219,column:11}},type:'if',locations:[{start:{line:213,column:10},end:{line:219,column:11}},{start:{line:213,column:10},end:{line:219,column:11}}],line:213},'26':{loc:{start:{line:230,column:10},end:{line:236,column:11}},type:'if',locations:[{start:{line:230,column:10},end:{line:236,column:11}},{start:{line:230,column:10},end:{line:236,column:11}}],line:230},'27':{loc:{start:{line:239,column:10},end:{line:245,column:11}},type:'if',locations:[{start:{line:239,column:10},end:{line:245,column:11}},{start:{line:239,column:10},end:{line:245,column:11}}],line:239},'28':{loc:{start:{line:248,column:10},end:{line:251,column:11}},type:'if',locations:[{start:{line:248,column:10},end:{line:251,column:11}},{start:{line:248,column:10},end:{line:251,column:11}}],line:248},'29':{loc:{start:{line:253,column:10},end:{line:255,column:11}},type:'if',locations:[{start:{line:253,column:10},end:{line:255,column:11}},{start:{line:253,column:10},end:{line:255,column:11}}],line:253},'30':{loc:{start:{line:256,column:10},end:{line:258,column:11}},type:'if',locations:[{start:{line:256,column:10},end:{line:258,column:11}},{start:{line:256,column:10},end:{line:258,column:11}}],line:256},'31':{loc:{start:{line:260,column:10},end:{line:262,column:11}},type:'if',locations:[{start:{line:260,column:10},end:{line:262,column:11}},{start:{line:260,column:10},end:{line:262,column:11}}],line:260},'32':{loc:{start:{line:278,column:55},end:{line:278,column:72}},type:'default-arg',locations:[{start:{line:278,column:67},end:{line:278,column:72}}],line:278},'33':{loc:{start:{line:286,column:32},end:{line:286,column:99}},type:'cond-expr',locations:[{start:{line:286,column:57},end:{line:286,column:79}},{start:{line:286,column:80},end:{line:286,column:99}}],line:286},'34':{loc:{start:{line:287,column:44},end:{line:287,column:135}},type:'cond-expr',locations:[{start:{line:287,column:81},end:{line:287,column:115}},{start:{line:287,column:116},end:{line:287,column:135}}],line:287},'35':{loc:{start:{line:288,column:43},end:{line:288,column:132}},type:'cond-expr',locations:[{start:{line:288,column:79},end:{line:288,column:112}},{start:{line:288,column:113},end:{line:288,column:132}}],line:288},'36':{loc:{start:{line:289,column:40},end:{line:289,column:123}},type:'cond-expr',locations:[{start:{line:289,column:73},end:{line:289,column:103}},{start:{line:289,column:104},end:{line:289,column:123}}],line:289},'37':{loc:{start:{line:290,column:43},end:{line:290,column:132}},type:'cond-expr',locations:[{start:{line:290,column:79},end:{line:290,column:112}},{start:{line:290,column:113},end:{line:290,column:132}}],line:290},'38':{loc:{start:{line:293,column:64},end:{line:293,column:139}},type:'cond-expr',locations:[{start:{line:293,column:78},end:{line:293,column:105}},{start:{line:293,column:106},end:{line:293,column:139}}],line:293},'39':{loc:{start:{line:295,column:6},end:{line:301,column:7}},type:'if',locations:[{start:{line:295,column:6},end:{line:301,column:7}},{start:{line:295,column:6},end:{line:301,column:7}}],line:295},'40':{loc:{start:{line:295,column:9},end:{line:295,column:76}},type:'binary-expr',locations:[{start:{line:295,column:9},end:{line:295,column:36}},{start:{line:295,column:40},end:{line:295,column:76}}],line:295},'41':{loc:{start:{line:296,column:8},end:{line:298,column:9}},type:'if',locations:[{start:{line:296,column:8},end:{line:298,column:9}},{start:{line:296,column:8},end:{line:298,column:9}}],line:296},'42':{loc:{start:{line:296,column:11},end:{line:296,column:60}},type:'binary-expr',locations:[{start:{line:296,column:11},end:{line:296,column:29}},{start:{line:296,column:33},end:{line:296,column:60}}],line:296},'43':{loc:{start:{line:303,column:6},end:{line:314,column:7}},type:'if',locations:[{start:{line:303,column:6},end:{line:314,column:7}},{start:{line:303,column:6},end:{line:314,column:7}}],line:303},'44':{loc:{start:{line:304,column:8},end:{line:307,column:9}},type:'if',locations:[{start:{line:304,column:8},end:{line:307,column:9}},{start:{line:304,column:8},end:{line:307,column:9}}],line:304},'45':{loc:{start:{line:317,column:6},end:{line:328,column:7}},type:'if',locations:[{start:{line:317,column:6},end:{line:328,column:7}},{start:{line:317,column:6},end:{line:328,column:7}}],line:317},'46':{loc:{start:{line:321,column:38},end:{line:321,column:187}},type:'cond-expr',locations:[{start:{line:321,column:70},end:{line:321,column:154}},{start:{line:321,column:155},end:{line:321,column:187}}],line:321},'47':{loc:{start:{line:324,column:8},end:{line:326,column:9}},type:'if',locations:[{start:{line:324,column:8},end:{line:326,column:9}},{start:{line:324,column:8},end:{line:326,column:9}}],line:324},'48':{loc:{start:{line:330,column:6},end:{line:347,column:7}},type:'if',locations:[{start:{line:330,column:6},end:{line:347,column:7}},{start:{line:330,column:6},end:{line:347,column:7}}],line:330},'49':{loc:{start:{line:333,column:8},end:{line:345,column:9}},type:'if',locations:[{start:{line:333,column:8},end:{line:345,column:9}},{start:{line:333,column:8},end:{line:345,column:9}}],line:333},'50':{loc:{start:{line:358,column:6},end:{line:374,column:7}},type:'if',locations:[{start:{line:358,column:6},end:{line:374,column:7}},{start:{line:358,column:6},end:{line:374,column:7}}],line:358},'51':{loc:{start:{line:360,column:8},end:{line:372,column:9}},type:'if',locations:[{start:{line:360,column:8},end:{line:372,column:9}},{start:{line:360,column:8},end:{line:372,column:9}}],line:360},'52':{loc:{start:{line:376,column:6},end:{line:388,column:7}},type:'if',locations:[{start:{line:376,column:6},end:{line:388,column:7}},{start:{line:376,column:6},end:{line:388,column:7}}],line:376},'53':{loc:{start:{line:376,column:9},end:{line:376,column:54}},type:'binary-expr',locations:[{start:{line:376,column:9},end:{line:376,column:25}},{start:{line:376,column:29},end:{line:376,column:54}}],line:376},'54':{loc:{start:{line:382,column:12},end:{line:388,column:7}},type:'if',locations:[{start:{line:382,column:12},end:{line:388,column:7}},{start:{line:382,column:12},end:{line:388,column:7}}],line:382},'55':{loc:{start:{line:390,column:6},end:{line:402,column:7}},type:'if',locations:[{start:{line:390,column:6},end:{line:402,column:7}},{start:{line:390,column:6},end:{line:402,column:7}}],line:390},'56':{loc:{start:{line:390,column:9},end:{line:390,column:62}},type:'binary-expr',locations:[{start:{line:390,column:9},end:{line:390,column:29}},{start:{line:390,column:33},end:{line:390,column:62}}],line:390},'57':{loc:{start:{line:396,column:12},end:{line:402,column:7}},type:'if',locations:[{start:{line:396,column:12},end:{line:402,column:7}},{start:{line:396,column:12},end:{line:402,column:7}}],line:396},'58':{loc:{start:{line:405,column:6},end:{line:407,column:7}},type:'if',locations:[{start:{line:405,column:6},end:{line:407,column:7}},{start:{line:405,column:6},end:{line:407,column:7}}],line:405},'59':{loc:{start:{line:409,column:6},end:{line:417,column:7}},type:'if',locations:[{start:{line:409,column:6},end:{line:417,column:7}},{start:{line:409,column:6},end:{line:417,column:7}}],line:409},'60':{loc:{start:{line:410,column:8},end:{line:416,column:9}},type:'if',locations:[{start:{line:410,column:8},end:{line:416,column:9}},{start:{line:410,column:8},end:{line:416,column:9}}],line:410},'61':{loc:{start:{line:422,column:6},end:{line:428,column:7}},type:'if',locations:[{start:{line:422,column:6},end:{line:428,column:7}},{start:{line:422,column:6},end:{line:428,column:7}}],line:422},'62':{loc:{start:{line:423,column:8},end:{line:427,column:9}},type:'if',locations:[{start:{line:423,column:8},end:{line:427,column:9}},{start:{line:423,column:8},end:{line:427,column:9}}],line:423}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0,'81':0,'82':0,'83':0,'84':0,'85':0,'86':0,'87':0,'88':0,'89':0,'90':0,'91':0,'92':0,'93':0,'94':0,'95':0,'96':0,'97':0,'98':0,'99':0,'100':0,'101':0,'102':0,'103':0,'104':0,'105':0,'106':0,'107':0,'108':0,'109':0,'110':0,'111':0,'112':0,'113':0,'114':0,'115':0,'116':0,'117':0,'118':0,'119':0,'120':0,'121':0,'122':0,'123':0,'124':0,'125':0,'126':0,'127':0,'128':0,'129':0,'130':0,'131':0,'132':0,'133':0,'134':0,'135':0,'136':0,'137':0,'138':0,'139':0,'140':0,'141':0,'142':0,'143':0,'144':0,'145':0,'146':0,'147':0,'148':0,'149':0,'150':0,'151':0,'152':0,'153':0,'154':0,'155':0,'156':0,'157':0,'158':0,'159':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0},b:{'0':[0],'1':[0],'2':[0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0],'13':[0],'14':[0,0],'15':[0,0],'16':[0,0],'17':[0,0],'18':[0,0],'19':[0,0],'20':[0,0],'21':[0,0],'22':[0,0],'23':[0,0],'24':[0,0],'25':[0,0],'26':[0,0],'27':[0,0],'28':[0,0],'29':[0,0],'30':[0,0],'31':[0,0],'32':[0],'33':[0,0],'34':[0,0],'35':[0,0],'36':[0,0],'37':[0,0],'38':[0,0],'39':[0,0],'40':[0,0],'41':[0,0],'42':[0,0],'43':[0,0],'44':[0,0],'45':[0,0],'46':[0,0],'47':[0,0],'48':[0,0],'49':[0,0],'50':[0,0],'51':[0,0],'52':[0,0],'53':[0,0],'54':[0,0],'55':[0,0],'56':[0,0],'57':[0,0],'58':[0,0],'59':[0,0],'60':[0,0],'61':[0,0],'62':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const mysql=(++cov_28o7us3tgy.s[0],require('mysql'));const CONFIGURATION_DB=(++cov_28o7us3tgy.s[1],require('./config.json'));const LOG_QUERIES=(++cov_28o7us3tgy.s[2],require('./queries/log.json'));class Database{constructor(){++cov_28o7us3tgy.f[0];++cov_28o7us3tgy.s[3];this._configuration=CONFIGURATION_DB;++cov_28o7us3tgy.s[4];this._connection=mysql.createConnection(this._configuration);++cov_28o7us3tgy.s[5];this._log_queries=LOG_QUERIES;++cov_28o7us3tgy.s[6];this._connection.once("error",function(error){++cov_28o7us3tgy.f[1];++cov_28o7us3tgy.s[7];console.error(error);});}_close_connection(){++cov_28o7us3tgy.f[2];const _self=(++cov_28o7us3tgy.s[8],this);++cov_28o7us3tgy.s[9];_self._connection.destroy();}_log_actions(action=(++cov_28o7us3tgy.b[0][0],""),obj=(++cov_28o7us3tgy.b[1][0],{})){//
// const _self=this;
//
// let action_sentence=action.split(".");
// let sql_sentence=_self._log_queries[action_sentence[0]][action_sentence[1]];
// obj.id_contenido=(obj.id_contenido)?obj.id_contenido:0;
// sql_sentence=_self._replace_variables_on_query(sql_sentence,obj);
// _self.sendQuery(sql_sentence,obj).then(()=>{
//   console.info(`* LOGGED CORRECTLY ${action} *`);
// })
// .catch((err)=>{
//   console.error(`* ERROR ON LOG * \n PROBLEM TO EXECUTE THE LOG SENTENCE ${err}`);
// });
++cov_28o7us3tgy.f[3];}_replace_characters(cadena=(++cov_28o7us3tgy.b[2][0],"")){++cov_28o7us3tgy.f[4];++cov_28o7us3tgy.s[10];if(cadena.toString().startsWith("data:image")){++cov_28o7us3tgy.b[3][0];++cov_28o7us3tgy.s[11];return cadena;}else{++cov_28o7us3tgy.b[3][1];}const regex=(++cov_28o7us3tgy.s[12],/[\[\^{}`*+\\=ยบ"\]]+/g);++cov_28o7us3tgy.s[13];return cadena.toString().replace(regex,"");}_replace_variables_on_query(queries,obj){++cov_28o7us3tgy.f[5];const _self=(++cov_28o7us3tgy.s[14],this);let query_parsed=(++cov_28o7us3tgy.s[15],[]);++cov_28o7us3tgy.s[16];queries=queries.toString().split(";");++cov_28o7us3tgy.s[17];for(let i=0;i<queries.length;i++){let query=(++cov_28o7us3tgy.s[18],queries[i]);++cov_28o7us3tgy.s[19];for(const prop in obj){++cov_28o7us3tgy.s[20];if(obj.hasOwnProperty(prop)){++cov_28o7us3tgy.b[4][0];++cov_28o7us3tgy.s[21];query=obj[prop]===null?(++cov_28o7us3tgy.b[5][0],query):(++cov_28o7us3tgy.b[5][1],query.split(`[${prop}]`).join((++cov_28o7us3tgy.b[7][0],isNaN(obj[prop]))&&(++cov_28o7us3tgy.b[7][1],prop!=="multiple_insert_query")?(++cov_28o7us3tgy.b[6][0],`"${_self._replace_characters(obj[prop])}"`):(++cov_28o7us3tgy.b[6][1],`${obj[prop]}`)));}else{++cov_28o7us3tgy.b[4][1];}}++cov_28o7us3tgy.s[22];query_parsed.push(query);}++cov_28o7us3tgy.s[23];return query_parsed.join(";");}createCompatibilityTableForInsertCourseQuery(obj,id_contenido,id_usuario){++cov_28o7us3tgy.f[6];let finalQuery=(++cov_28o7us3tgy.s[24],"");++cov_28o7us3tgy.s[25];for(let i=0;i<obj.length;i++){++cov_28o7us3tgy.s[26];// id_contenido,id_usuario,id_punto_control,id_tc,valor,fecha_validacion_proveedor,fecha_validacion_CQA
if(i>0){++cov_28o7us3tgy.b[8][0];++cov_28o7us3tgy.s[27];finalQuery+=`, `;}else{++cov_28o7us3tgy.b[8][1];}++cov_28o7us3tgy.s[28];finalQuery+=`(${id_contenido},${parseInt(id_usuario)},${parseInt(obj[i].id_punto_control)},${parseInt(obj[i].id_tc)},${parseInt(obj[i].id_valor)})`;}++cov_28o7us3tgy.s[29];return{multiple_insert_query:finalQuery};}createInsertContentPlatform(obj,id_contenido){++cov_28o7us3tgy.f[7];let finalQuery=(++cov_28o7us3tgy.s[30],"");++cov_28o7us3tgy.s[31];for(let i=0;i<obj.length;i++){++cov_28o7us3tgy.s[32];// id_contenido,id_usuario,id_punto_control,id_tc,valor,fecha_validacion_proveedor,fecha_validacion_CQA
if(i>0){++cov_28o7us3tgy.b[9][0];++cov_28o7us3tgy.s[33];finalQuery+=`, `;}else{++cov_28o7us3tgy.b[9][1];}// finalQuery+=`(${parseInt(id_contenido)},${parseInt(obj[i])},${parseInt(obj[i].id_pais)})`;
++cov_28o7us3tgy.s[34];finalQuery+=`(${parseInt(obj[i])},${parseInt(id_contenido)})`;}++cov_28o7us3tgy.s[35];return{multiple_insert_query:finalQuery};}createInsertCategories(obj,id_contenido){++cov_28o7us3tgy.f[8];let finalQuery=(++cov_28o7us3tgy.s[36],"");++cov_28o7us3tgy.s[37];for(let i=0;i<obj.length;i++){++cov_28o7us3tgy.s[38];if(i>0){++cov_28o7us3tgy.b[10][0];++cov_28o7us3tgy.s[39];finalQuery+=`, `;}else{++cov_28o7us3tgy.b[10][1];}++cov_28o7us3tgy.s[40];finalQuery+=`(${parseInt(id_contenido)},${parseInt(obj[i].id_categoria)},${obj[i].id_subcategoria})`;}++cov_28o7us3tgy.s[41];return{multiple_insert_query:finalQuery};}createInsertContentServer(obj,id_contenido){++cov_28o7us3tgy.f[9];let finalQuery=(++cov_28o7us3tgy.s[42],"");++cov_28o7us3tgy.s[43];for(let i=0;i<obj.length;i++){++cov_28o7us3tgy.s[44];if(i>0){++cov_28o7us3tgy.b[11][0];++cov_28o7us3tgy.s[45];finalQuery+=`, `;}else{++cov_28o7us3tgy.b[11][1];}++cov_28o7us3tgy.s[46];finalQuery+=`(${parseInt(id_contenido)},${parseInt(obj[i])})`;}++cov_28o7us3tgy.s[47];return{multiple_insert_query:finalQuery};}createInsertContentRecursos(obj,id_contenido){++cov_28o7us3tgy.f[10];let finalQuery=(++cov_28o7us3tgy.s[48],"");++cov_28o7us3tgy.s[49];for(let i=0;i<obj.length;i++){++cov_28o7us3tgy.s[50];if(i>0){++cov_28o7us3tgy.b[12][0];++cov_28o7us3tgy.s[51];finalQuery+=`, `;}else{++cov_28o7us3tgy.b[12][1];}++cov_28o7us3tgy.s[52];finalQuery+=`(${parseInt(id_contenido)},${parseInt(obj[i])})`;}++cov_28o7us3tgy.s[53];return{multiple_insert_query:finalQuery};}sendQuery(query,object=(++cov_28o7us3tgy.b[13][0],{})){++cov_28o7us3tgy.f[11];const _self=(++cov_28o7us3tgy.s[54],this);++cov_28o7us3tgy.s[55];return new Promise(function(resolve,reject){++cov_28o7us3tgy.f[12];++cov_28o7us3tgy.s[56];if(!query){++cov_28o7us3tgy.b[14][0];++cov_28o7us3tgy.s[57];resolve(true);}else{++cov_28o7us3tgy.b[14][1];}++cov_28o7us3tgy.s[58];query=_self._replace_variables_on_query(query,object);// Use the connection
++cov_28o7us3tgy.s[59];_self._connection.query(query,function(err,rows){++cov_28o7us3tgy.f[13];++cov_28o7us3tgy.s[60];// In case of error
if(err){++cov_28o7us3tgy.b[15][0];++cov_28o7us3tgy.s[61];reject(err);}else{++cov_28o7us3tgy.b[15][1];}// Don't use the connection here, it has been returned to the pool.!!!!!!
++cov_28o7us3tgy.s[62];resolve(rows);});});}recordOnLog(action,obj){++cov_28o7us3tgy.f[14];++cov_28o7us3tgy.s[63];// Record the user's login
this._log_actions(action,{id_usuario:obj.id_usuario,id_contenido:obj.id_contenido,fecha_modificacion:new Date().toISOString().slice(0,19).replace('T',' ')});}insert_new_content(camposFormulario,user_queries){++cov_28o7us3tgy.f[15];const _self=(++cov_28o7us3tgy.s[64],this);++cov_28o7us3tgy.s[65];return new Promise((resolve,reject)=>{++cov_28o7us3tgy.f[16];++cov_28o7us3tgy.s[66];camposFormulario["notas"]=camposFormulario.notas?(++cov_28o7us3tgy.b[16][0],camposFormulario.notas):(++cov_28o7us3tgy.b[16][1],"Notas por defecto");++cov_28o7us3tgy.s[67];camposFormulario["indice_contenidos"]=camposFormulario.indice_contenidos?(++cov_28o7us3tgy.b[17][0],camposFormulario.indice_contenidos):(++cov_28o7us3tgy.b[17][1],"Notas por defecto");++cov_28o7us3tgy.s[68];camposFormulario["notas_produccion"]=camposFormulario.notas_produccion?(++cov_28o7us3tgy.b[18][0],camposFormulario.notas_produccion):(++cov_28o7us3tgy.b[18][1],"Notas por defecto");++cov_28o7us3tgy.s[69];camposFormulario["participantes"]=camposFormulario.participantes?(++cov_28o7us3tgy.b[19][0],camposFormulario.participantes):(++cov_28o7us3tgy.b[19][1],"Notas por defecto");++cov_28o7us3tgy.s[70];camposFormulario["notas_contenidos"]=camposFormulario.notas_contenidos?(++cov_28o7us3tgy.b[20][0],camposFormulario.notas_contenidos):(++cov_28o7us3tgy.b[20][1],"Notas por defecto");++cov_28o7us3tgy.s[71];_self.sendQuery(user_queries.INSERT.content,camposFormulario).then(row=>{++cov_28o7us3tgy.f[17];++cov_28o7us3tgy.s[72];// After insert the basic info about the content we need to populate the relations
camposFormulario["id_contenido"]=row.insertId;let additional_queries=(++cov_28o7us3tgy.s[73],[]);++cov_28o7us3tgy.s[74];if((++cov_28o7us3tgy.b[22][0],camposFormulario.categorias)&&(++cov_28o7us3tgy.b[22][1],camposFormulario.categorias.length>0)){++cov_28o7us3tgy.b[21][0];++cov_28o7us3tgy.s[75];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_categorias,{multiple_insert_query:_self.createInsertCategories(camposFormulario.categorias,camposFormulario.id_contenido).multiple_insert_query}));}else{++cov_28o7us3tgy.b[21][1];}++cov_28o7us3tgy.s[76];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.tableOfCompatibilities,{multiple_insert_query:_self.createCompatibilityTableForInsertCourseQuery(camposFormulario.multiple_insert_query,camposFormulario.id_contenido,camposFormulario.id_usuario).multiple_insert_query,id_contenido:camposFormulario.id_contenido,id_usuario:camposFormulario.id_usuario}));++cov_28o7us3tgy.s[77];if(camposFormulario.servidores_contenidos.length>0){++cov_28o7us3tgy.b[23][0];++cov_28o7us3tgy.s[78];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_servidor,{id_contenido:camposFormulario.id_contenido,multiple_insert_query:_self.createInsertContentServer(camposFormulario.servidores_contenidos,camposFormulario.id_contenido).multiple_insert_query}));}else{++cov_28o7us3tgy.b[23][1];}// Campos licencia en el contenido
++cov_28o7us3tgy.s[79];if(camposFormulario.licencia==1){++cov_28o7us3tgy.b[24][0];++cov_28o7us3tgy.s[80];camposFormulario['fecha_fin']=new Date(camposFormulario['fecha_fin']).toISOString().slice(0,19).replace('T',' ');++cov_28o7us3tgy.s[81];camposFormulario['fecha_inicio']=new Date(camposFormulario['fecha_inicio']).toISOString().slice(0,19).replace('T',' ');++cov_28o7us3tgy.s[82];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_licencia,camposFormulario));}else{++cov_28o7us3tgy.b[24][1];}++cov_28o7us3tgy.s[83];if(camposFormulario.recursos.length>0){++cov_28o7us3tgy.b[25][0];++cov_28o7us3tgy.s[84];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_recursos,{id_contenido:camposFormulario.id_contenido,multiple_insert_query:_self.createInsertContentRecursos(camposFormulario.recursos,camposFormulario.id_contenido).multiple_insert_query}));}else{++cov_28o7us3tgy.b[25][1];}++cov_28o7us3tgy.s[85];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_technology,{id_contenido:camposFormulario.id_contenido,id_tecnologia:camposFormulario.id_tecnologia}));++cov_28o7us3tgy.s[86];if(camposFormulario.id_habilidad){++cov_28o7us3tgy.b[26][0];++cov_28o7us3tgy.s[87];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_habilidades,{id_contenido:camposFormulario.id_contenido,id_habilidad:camposFormulario.id_habilidad}));}else{++cov_28o7us3tgy.b[26][1];}++cov_28o7us3tgy.s[88];if(camposFormulario.id_nivel){++cov_28o7us3tgy.b[27][0];++cov_28o7us3tgy.s[89];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_education,{id_contenido:camposFormulario.id_contenido,id_nivel:camposFormulario.id_nivel}));}else{++cov_28o7us3tgy.b[27][1];}++cov_28o7us3tgy.s[90];if(camposFormulario.table_platforms.length){++cov_28o7us3tgy.b[28][0];++cov_28o7us3tgy.s[91];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_platform,_self.createInsertContentPlatform(camposFormulario.table_platforms,camposFormulario.id_contenido,camposFormulario.id_pais)));}else{++cov_28o7us3tgy.b[28][1];}++cov_28o7us3tgy.s[92];if(camposFormulario['id_proyecto']){++cov_28o7us3tgy.b[29][0];++cov_28o7us3tgy.s[93];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.contentRelation,camposFormulario));}else{++cov_28o7us3tgy.b[29][1];}++cov_28o7us3tgy.s[94];if(camposFormulario['url_image']){++cov_28o7us3tgy.b[30][0];++cov_28o7us3tgy.s[95];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.screenshot,camposFormulario));}else{++cov_28o7us3tgy.b[30][1];}++cov_28o7us3tgy.s[96];if(camposFormulario['catalogo_ted']===1){++cov_28o7us3tgy.b[31][0];++cov_28o7us3tgy.s[97];global.CONTROL.catalogo=[];}else{++cov_28o7us3tgy.b[31][1];}++cov_28o7us3tgy.s[98];additional_queries=additional_queries.join(" ");++cov_28o7us3tgy.s[99];_self.sendQuery(additional_queries).then(()=>{++cov_28o7us3tgy.f[18];++cov_28o7us3tgy.s[100];resolve(true);}).catch(error=>{++cov_28o7us3tgy.f[19];++cov_28o7us3tgy.s[101];reject(error);});}).catch(err=>{++cov_28o7us3tgy.f[20];++cov_28o7us3tgy.s[102];reject(err);});});}update_content(content,user_queries,camposFormulario,update_file=(++cov_28o7us3tgy.b[32][0],false)){++cov_28o7us3tgy.f[21];const _self=(++cov_28o7us3tgy.s[103],this);++cov_28o7us3tgy.s[104];return new Promise(function(resolve,reject){++cov_28o7us3tgy.f[22];++cov_28o7us3tgy.s[105];console.log(camposFormulario);let additional_queries=(++cov_28o7us3tgy.s[106],[]);++cov_28o7us3tgy.s[107];camposFormulario["notas"]=camposFormulario.notas?(++cov_28o7us3tgy.b[33][0],camposFormulario.notas):(++cov_28o7us3tgy.b[33][1],"Notas por defecto");++cov_28o7us3tgy.s[108];camposFormulario["indice_contenidos"]=camposFormulario.indice_contenidos?(++cov_28o7us3tgy.b[34][0],camposFormulario.indice_contenidos):(++cov_28o7us3tgy.b[34][1],"Notas por defecto");++cov_28o7us3tgy.s[109];camposFormulario["notas_produccion"]=camposFormulario.notas_produccion?(++cov_28o7us3tgy.b[35][0],camposFormulario.notas_produccion):(++cov_28o7us3tgy.b[35][1],"Notas por defecto");++cov_28o7us3tgy.s[110];camposFormulario["participantes"]=camposFormulario.participantes?(++cov_28o7us3tgy.b[36][0],camposFormulario.participantes):(++cov_28o7us3tgy.b[36][1],"Notas por defecto");++cov_28o7us3tgy.s[111];camposFormulario["notas_contenidos"]=camposFormulario.notas_contenidos?(++cov_28o7us3tgy.b[37][0],camposFormulario.notas_contenidos):(++cov_28o7us3tgy.b[37][1],"Notas por defecto");++cov_28o7us3tgy.s[112];camposFormulario['fecha_publicacion']=new Date().toISOString().substring(0,19).replace('T',' ');++cov_28o7us3tgy.s[113];additional_queries.push(_self._replace_variables_on_query(update_file?(++cov_28o7us3tgy.b[38][0],user_queries.UPDATE.content):(++cov_28o7us3tgy.b[38][1],user_queries.UPDATE.contentNoFile),camposFormulario));++cov_28o7us3tgy.s[114];if((++cov_28o7us3tgy.b[40][0],camposFormulario.categorias)&&(++cov_28o7us3tgy.b[40][1],camposFormulario.categorias.length>0)){++cov_28o7us3tgy.b[39][0];++cov_28o7us3tgy.s[115];if((++cov_28o7us3tgy.b[42][0],content.categorias)&&(++cov_28o7us3tgy.b[42][1],content.categorias.length>0)){++cov_28o7us3tgy.b[41][0];++cov_28o7us3tgy.s[116];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.content_categorias_subcategorias,{id_contenido:camposFormulario.id_contenido}));}else{++cov_28o7us3tgy.b[41][1];}++cov_28o7us3tgy.s[117];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_categorias,{multiple_insert_query:_self.createInsertCategories(camposFormulario.categorias,camposFormulario.id_contenido).multiple_insert_query}));}else{++cov_28o7us3tgy.b[39][1];}++cov_28o7us3tgy.s[118];if(camposFormulario.recursos.length>0){++cov_28o7us3tgy.b[43][0];++cov_28o7us3tgy.s[119];if(content.recursos.length>0){++cov_28o7us3tgy.b[44][0];++cov_28o7us3tgy.s[120];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.content_recursos,{id_contenido:camposFormulario.id_contenido}));}else{++cov_28o7us3tgy.b[44][1];}++cov_28o7us3tgy.s[121];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_recursos,{id_contenido:camposFormulario.id_contenido,multiple_insert_query:_self.createInsertContentRecursos(camposFormulario.recursos,camposFormulario.id_contenido).multiple_insert_query}));}else{++cov_28o7us3tgy.b[43][1];}// Campos licencia en el contenido
++cov_28o7us3tgy.s[122];if(camposFormulario.licencia==1){++cov_28o7us3tgy.b[45][0];++cov_28o7us3tgy.s[123];camposFormulario['fecha_inicio']=new Date(camposFormulario['fecha_inicio']).toISOString().slice(0,19).replace('T',' ');++cov_28o7us3tgy.s[124];camposFormulario['fecha_fin']=camposFormulario['fecha_fin']?(++cov_28o7us3tgy.b[46][0],new Date(camposFormulario['fecha_fin']).toISOString().slice(0,19).replace('T',' ')):(++cov_28o7us3tgy.b[46][1],camposFormulario['fecha_inicio']);++cov_28o7us3tgy.s[125];if(content.licencia==1){++cov_28o7us3tgy.b[47][0];++cov_28o7us3tgy.s[126];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.content_licencia,{id_contenido:camposFormulario.id_contenido}));}else{++cov_28o7us3tgy.b[47][1];}++cov_28o7us3tgy.s[127];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_licencia,camposFormulario));}else{++cov_28o7us3tgy.b[45][1];}++cov_28o7us3tgy.s[128];if(camposFormulario.table_platforms.length>0){++cov_28o7us3tgy.b[48][0];++cov_28o7us3tgy.s[129];//If the content already has table platforms assigned to.
if(content.platforms.length>0){++cov_28o7us3tgy.b[49][0];++cov_28o7us3tgy.s[130];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.content_platform,{id_contenido:camposFormulario.id_contenido,multiple_insert_query:_self.createInsertContentPlatform(camposFormulario.table_platforms,camposFormulario.id_contenido,camposFormulario.id_pais).multiple_insert_query}));}else{++cov_28o7us3tgy.b[49][1];++cov_28o7us3tgy.s[131];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_platform,{id_contenido:camposFormulario.id_contenido,multiple_insert_query:_self.createInsertContentPlatform(camposFormulario.table_platforms,camposFormulario.id_contenido,camposFormulario.id_pais).multiple_insert_query}));}}else{++cov_28o7us3tgy.b[48][1];}++cov_28o7us3tgy.s[132];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.content_technology,{id_contenido:camposFormulario.id_contenido,id_tecnologia:camposFormulario.id_tecnologia}));++cov_28o7us3tgy.s[133];if(camposFormulario.servidores_contenidos.length>0){++cov_28o7us3tgy.b[50][0];++cov_28o7us3tgy.s[134];if(content.servidores_contenidos.length>0){++cov_28o7us3tgy.b[51][0];++cov_28o7us3tgy.s[135];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.content_servidor,{id_contenido:camposFormulario.id_contenido,multiple_insert_query:_self.createInsertContentServer(camposFormulario.servidores_contenidos,camposFormulario.id_contenido).multiple_insert_query}));}else{++cov_28o7us3tgy.b[51][1];++cov_28o7us3tgy.s[136];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_servidor,{id_contenido:camposFormulario.id_contenido,multiple_insert_query:_self.createInsertContentServer(camposFormulario.servidores_contenidos,camposFormulario.id_contenido).multiple_insert_query}));}}else{++cov_28o7us3tgy.b[50][1];}++cov_28o7us3tgy.s[137];if((++cov_28o7us3tgy.b[53][0],content.id_nivel)&&(++cov_28o7us3tgy.b[53][1],camposFormulario.id_nivel)){++cov_28o7us3tgy.b[52][0];++cov_28o7us3tgy.s[138];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.content_education,{id_contenido:camposFormulario.id_contenido,id_nivel:camposFormulario.id_nivel}));}else{++cov_28o7us3tgy.b[52][1];++cov_28o7us3tgy.s[139];if(camposFormulario.id_nivel){++cov_28o7us3tgy.b[54][0];++cov_28o7us3tgy.s[140];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_education,{id_contenido:camposFormulario.id_contenido,id_nivel:camposFormulario.id_nivel}));}else{++cov_28o7us3tgy.b[54][1];}}++cov_28o7us3tgy.s[141];if((++cov_28o7us3tgy.b[56][0],content.id_habilidad)&&(++cov_28o7us3tgy.b[56][1],camposFormulario.id_habilidad)){++cov_28o7us3tgy.b[55][0];++cov_28o7us3tgy.s[142];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.content_habilidades+user_queries.INSERT.content_habilidades,{id_contenido:camposFormulario.id_contenido,id_habilidad:camposFormulario.id_habilidad}));}else{++cov_28o7us3tgy.b[55][1];++cov_28o7us3tgy.s[143];if(camposFormulario.id_habilidad){++cov_28o7us3tgy.b[57][0];++cov_28o7us3tgy.s[144];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.content_habilidades,{id_contenido:camposFormulario.id_contenido,id_habilidad:camposFormulario.id_habilidad}));}else{++cov_28o7us3tgy.b[57][1];}}++cov_28o7us3tgy.s[145];if(camposFormulario['screenshot']){++cov_28o7us3tgy.b[58][0];++cov_28o7us3tgy.s[146];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.screenshot,camposFormulario));}else{++cov_28o7us3tgy.b[58][1];}++cov_28o7us3tgy.s[147];if(camposFormulario.multiple_insert_query.length>0){++cov_28o7us3tgy.b[59][0];++cov_28o7us3tgy.s[148];if(content.compatibilities_table.length>0){++cov_28o7us3tgy.b[60][0];++cov_28o7us3tgy.s[149];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.tableOfCompatibilities+user_queries.INSERT.tableOfCompatibilities,{multiple_insert_query:_self.createCompatibilityTableForInsertCourseQuery(camposFormulario.multiple_insert_query,camposFormulario.id_contenido,camposFormulario.id_usuario).multiple_insert_query,id_contenido:camposFormulario.id_contenido}));}else{++cov_28o7us3tgy.b[60][1];++cov_28o7us3tgy.s[150];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.tableOfCompatibilities,{multiple_insert_query:_self.createCompatibilityTableForInsertCourseQuery(camposFormulario.multiple_insert_query,camposFormulario.id_contenido,camposFormulario.id_usuario).multiple_insert_query,id_contenido:camposFormulario.id_contenido}));}}else{++cov_28o7us3tgy.b[59][1];}++cov_28o7us3tgy.s[151];if(camposFormulario['id_proyecto']){++cov_28o7us3tgy.b[61][0];++cov_28o7us3tgy.s[152];if(content.id_proyecto){++cov_28o7us3tgy.b[62][0];++cov_28o7us3tgy.s[153];additional_queries.push(_self._replace_variables_on_query(user_queries.UPDATE.contentRelation,camposFormulario));}else{++cov_28o7us3tgy.b[62][1];++cov_28o7us3tgy.s[154];additional_queries.push(_self._replace_variables_on_query(user_queries.INSERT.contentRelation,camposFormulario));}}else{++cov_28o7us3tgy.b[61][1];}++cov_28o7us3tgy.s[155];additional_queries=additional_queries.join(" ");++cov_28o7us3tgy.s[156];_self.sendQuery(additional_queries).then(()=>{++cov_28o7us3tgy.f[23];++cov_28o7us3tgy.s[157];resolve(true);}).catch(error=>{++cov_28o7us3tgy.f[24];++cov_28o7us3tgy.s[158];reject(error);});//
});}}++cov_28o7us3tgy.s[159];module.exports=Database;